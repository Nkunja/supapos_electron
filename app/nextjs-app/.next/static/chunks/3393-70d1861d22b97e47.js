"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3393],{54312:(e,t,r)=>{r.d(t,{DD:()=>c,WY:()=>l,d$:()=>i,vc:()=>n}),r(8102);var s=r(61778);let a="".concat("https://supa.sirnkunja.co.ke/","api/products/"),i=async e=>{try{let t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.category)&&t.append("category",e.category),(null==e?void 0:e.is_active)&&t.append("is_active",e.is_active);let r=t.toString()?"".concat(a,"?").concat(t.toString()):a;return(await s.default.get(r)).data}catch(e){throw Error("Failed to fetch products.")}},l=async e=>{try{return(await s.default.post(a,e)).data}catch(e){throw Error("Failed to create product.")}},n=async(e,t)=>{try{return(await s.default.put("".concat(a).concat(e,"/"),t)).data}catch(e){throw Error("Failed to update product.")}},c=async e=>{try{return(await s.default.delete("".concat(a).concat(e,"/"))).data}catch(e){throw Error("Failed to delete product.")}}},73393:(e,t,r)=>{r.d(t,{g:()=>U});var s=r(95155),a=r(43114),i=r(54312),l=r(74357),n=r(5540),c=r(49026),o=r(97168),d=r(88482),u=r(89852),p=r(82714),m=r(95784),x=r(12115),h=r(77740),g=r(47924),_=r(53999);function b(e){let{className:t,...r}=e;return(0,s.jsx)(h.uB,{"data-slot":"command",className:(0,_.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...r})}function f(e){let{className:t,...r}=e;return(0,s.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,s.jsx)(g.A,{className:"size-4 shrink-0 opacity-50"}),(0,s.jsx)(h.uB.Input,{"data-slot":"command-input",className:(0,_.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...r})]})}function j(e){let{...t}=e;return(0,s.jsx)(h.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function y(e){let{className:t,...r}=e;return(0,s.jsx)(h.uB.Group,{"data-slot":"command-group",className:(0,_.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...r})}function v(e){let{className:t,...r}=e;return(0,s.jsx)(h.uB.Item,{"data-slot":"command-item",className:(0,_.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}r(99840);var N=r(34156);function w(e){let{...t}=e;return(0,s.jsx)(N.bL,{"data-slot":"popover",...t})}function S(e){let{...t}=e;return(0,s.jsx)(N.l9,{"data-slot":"popover-trigger",...t})}function C(e){let{className:t,align:r="center",sideOffset:a=4,...i}=e;return(0,s.jsx)(N.ZL,{children:(0,s.jsx)(N.UC,{"data-slot":"popover-content",align:r,sideOffset:a,className:(0,_.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...i})})}var F=r(1243),A=r(40646),k=r(57434),P=r(37108),B=r(10081),D=r(5196),L=r(27809),E=r(69074),I=r(6740),J=r(51154),R=r(4229),T=r(54416),z=r(38543);let q={purchase_order:null,product:0,shop:0,batch_number:"",barcode:"",expiry_date:"",purchase_date:new Date().toISOString().split("T")[0],user_type:"both",drug_type:"otc",form:"tablet",pieces_per_unit:1,unit_of_measurement:"pieces",total_units:1,product_description:"",buying_price_per_unit:0,cost_price_per_piece:0,selling_price_per_piece:0,reorder_level:10,is_active:!0};function U(e){var t;let{isOpen:r=!0,onClose:h,onSuccess:g,isEmbedded:_=!1,inventory:N=null}=e,[U,Z]=(0,x.useState)(q),[O,V]=(0,x.useState)(!1),[$,W]=(0,x.useState)(""),[G,M]=(0,x.useState)(""),[Y,H]=(0,x.useState)(null),[Q,K]=(0,x.useState)(null),[X,ee]=(0,x.useState)(null),[et,er]=(0,x.useState)([]),[es,ea]=(0,x.useState)([]),[ei,el]=(0,x.useState)([]),[en,ec]=(0,x.useState)([]),[eo,ed]=(0,x.useState)([]),[eu,ep]=(0,x.useState)(!1),[em,ex]=(0,x.useState)(!1),[eh,eg]=(0,x.useState)(!1),[e_,eb]=(0,x.useState)(!1),[ef,ej]=(0,x.useState)(!1),[ey,ev]=(0,x.useState)(""),[eN,ew]=(0,x.useState)("");(0,x.useEffect)(()=>{r&&(eS(),eC(),eF(),eA())},[r]),(0,x.useEffect)(()=>{if(N&&et.length>0){Z({purchase_order:N.purchase_order||null,product:N.product,shop:N.shop||0,batch_number:N.batch_number,barcode:N.barcode||"",expiry_date:N.expiry_date||"",purchase_date:N.purchase_date||new Date().toISOString().split("T")[0],user_type:N.user_type,drug_type:N.drug_type,form:N.form,pieces_per_unit:N.pieces_per_unit||1,unit_of_measurement:N.unit_of_measurement,total_units:N.total_units||1,product_description:N.product_description||"",buying_price_per_unit:N.cost_price_per_piece*N.pieces_per_unit||0,cost_price_per_piece:N.cost_price_per_piece||0,selling_price_per_piece:N.selling_price_per_piece||0,reorder_level:N.reorder_level||10,is_active:!1!==N.is_active});let e=et.find(e=>e.id===N.product);if(e&&(H(e),ev(e.name+(e.generic_name?" (".concat(e.generic_name,")"):""))),N.purchase_order&&ei.length>0){let e=ei.find(e=>e.id===N.purchase_order);e&&K(e)}}else N||(Z(q),H(null),K(null),ev(""),ew(""))},[N,et,ei]),(0,x.useEffect)(()=>{if(U.buying_price_per_unit>0&&U.pieces_per_unit>0){let e=Number((U.buying_price_per_unit/U.pieces_per_unit).toFixed(1));if(e.toString().replace(".","").length>10)return void W("Cost price per piece exceeds 10 digits");Z(t=>({...t,cost_price_per_piece:e})),ee(10*Math.round(1.3*e/10))}else Z(e=>({...e,cost_price_per_piece:0})),ee(null)},[U.buying_price_per_unit,U.pieces_per_unit]);let eS=async()=>{eb(!0);try{let[e,t]=await Promise.all([(0,a.OB)(),(0,a.YU)()]);e&&ec(e),t&&ed(t)}catch(e){console.error("Failed to load choices:",e),z.oR.error("Failed to load form choices")}finally{eb(!1)}},eC=async()=>{ep(!0);try{let e=await (0,i.d$)();er(Array.isArray(e)?e:e.results||[])}catch(t){let e=t instanceof Error?t.message:"Failed to load products";z.oR.error(e),er([])}finally{ep(!1)}},eF=async()=>{ex(!0);try{let e=await (0,n.KM)();ea(Array.isArray(e)?e:e.results||[])}catch(e){z.oR.error("Failed to load shops"),ea([])}finally{ex(!1)}},eA=async()=>{eg(!0);try{let e=await (0,l.LH)(),t=[];Array.isArray(e)?t=e:e&&"object"==typeof e&&"results"in e?t=e.results||[]:(console.error("API returned unexpected data format:",e),t=[],z.oR.error("Failed to load purchase orders: Invalid data format"));let r=t.filter(e=>["completed","approved"].includes(e.status));el(r)}catch(e){console.error("Error loading purchase orders:",e),el([]),z.oR.error("Failed to load purchase orders")}finally{eg(!1)}},ek=(e,t)=>{if("buying_price_per_unit"===e&&((null==t?void 0:t.toString())||"").replace(".","").length>10)return void W("Buying price per unit must not exceed 10 digits");Z(r=>({...r,[e]:t})),$&&W(""),G&&M("")},eP=et.filter(e=>{if(!eN)return!0;let t=eN.toLowerCase().trim();return!t||e.name.toLowerCase().includes(t)||e.generic_name&&e.generic_name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||e.supplier&&e.supplier.toLowerCase().includes(t)}),eB=async e=>{if(e.preventDefault(),(()=>{if(!U.product||0===U.product)return W("Product selection is required"),!1;if(!U.shop||0===U.shop)return W("Shop selection is required"),!1;if(!U.batch_number.trim())return W("Batch number is required"),!1;if(U.pieces_per_unit<=0)return W("Pieces per unit must be greater than 0"),!1;if(U.total_units<=0)return W("Total units must be greater than 0"),!1;if(U.buying_price_per_unit<=0)return W("Buying price per unit must be greater than 0"),!1;if(U.cost_price_per_piece.toString().replace(".","").length>10)return W("Cost price per piece must not exceed 10 digits"),!1;if(U.selling_price_per_piece<=0)return W("Selling price per piece must be greater than 0"),!1;if(U.expiry_date){let e=new Date(U.expiry_date),t=new Date;if(t.setHours(0,0,0,0),e<=t)return W("Expiry date must be in the future"),!1}return!0})()){V(!0),W(""),M("");try{let e,t={purchase_order:U.purchase_order||void 0,product:U.product,shop:U.shop,batch_number:U.batch_number,barcode:U.barcode||void 0,user_type:U.user_type,drug_type:U.drug_type,form:U.form,pieces_per_unit:U.pieces_per_unit,unit_of_measurement:U.unit_of_measurement,total_units:U.total_units,product_description:U.product_description||void 0,expiry_date:U.expiry_date||void 0,purchase_date:U.purchase_date||void 0,cost_price_per_piece:U.cost_price_per_piece,selling_price_per_piece:U.selling_price_per_piece,reorder_level:U.reorder_level,is_active:U.is_active};N?(e=await (0,a.Q5)(N.id,t),z.oR.success("Inventory item updated successfully!")):(e=await (0,a.jQ)(t),z.oR.success("Inventory item created successfully!")),e&&(g(),_||h(),N||(Z(q),H(null),K(null),ev(""),ew("")))}catch(t){let e=t instanceof Error?t.message:"An error occurred";W(e),z.oR.error(e)}finally{V(!1)}}},eD=(0,s.jsxs)("div",{className:"space-y-6 p-6",children:[$&&(0,s.jsxs)(c.Fc,{className:"border-red-200 bg-red-50",children:[(0,s.jsx)(F.A,{className:"h-4 w-4 text-red-600"}),(0,s.jsx)(c.TN,{className:"text-red-800",children:$})]}),G&&(0,s.jsxs)(c.Fc,{className:"border-green-200 bg-green-50",children:[(0,s.jsx)(A.A,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)(c.TN,{className:"text-green-800",children:G})]}),(0,s.jsxs)("form",{onSubmit:eB,className:"space-y-6",children:[(0,s.jsxs)(d.Zp,{className:"border-purple-200 shadow-sm",children:[(0,s.jsxs)(d.aR,{className:"bg-purple-50/50",children:[(0,s.jsxs)(d.ZB,{className:"text-lg font-semibold text-purple-800",children:[(0,s.jsx)(k.A,{className:"inline-block w-5 h-5 mr-2"}),"Purchase Order Selection"]}),(0,s.jsx)(d.BT,{className:"text-purple-600",children:"Select the purchase order this inventory item relates to (optional)"})]}),(0,s.jsx)(d.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"purchase_order",className:"text-sm font-medium text-gray-700",children:"Purchase Order"}),(0,s.jsxs)(m.l6,{value:(null==(t=U.purchase_order)?void 0:t.toString())||"none",onValueChange:e=>{if("none"===e)K(null),Z(e=>({...e,purchase_order:null,shop:0}));else{let t=ei.find(t=>{var r;return(null==(r=t.id)?void 0:r.toString())===e});t&&(K(t),Z(e=>{var r;return{...e,purchase_order:t.id,shop:"number"==typeof t.shop?t.shop:(null==(r=t.shop)?void 0:r.id)||e.shop}}))}},disabled:eh,children:[(0,s.jsx)(m.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,s.jsx)(m.yv,{placeholder:eh?"Loading purchase orders...":"Select purchase order (optional)"})}),(0,s.jsxs)(m.gC,{children:[(0,s.jsx)(m.eb,{value:"none",children:"No purchase order"}),ei.map(e=>(0,s.jsxs)(m.eb,{value:e.id.toString(),children:[e.name," - ",e.supplier_name||"No supplier"," (",e.status,")"]},e.id))]})]}),Q&&(0,s.jsxs)("div",{className:"bg-purple-50 p-3 rounded-md border border-purple-200",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-purple-800",children:Q.name}),(0,s.jsxs)("p",{className:"text-xs text-purple-600",children:["Supplier: ",Q.supplier_name||"Not specified"]}),(0,s.jsxs)("p",{className:"text-xs text-purple-600",children:["Status: ",Q.status]}),Q.total_amount&&(0,s.jsxs)("p",{className:"text-xs text-purple-600",children:["Total Amount: $",Q.total_amount]})]})]})})]}),(0,s.jsxs)(d.Zp,{className:"border-blue-200 shadow-sm",children:[(0,s.jsxs)(d.aR,{className:"bg-blue-50/50",children:[(0,s.jsxs)(d.ZB,{className:"text-lg font-semibold text-blue-800",children:[(0,s.jsx)(P.A,{className:"inline-block w-5 h-5 mr-2"}),"Product & Shop Selection"]}),(0,s.jsx)(d.BT,{className:"text-blue-600",children:"Select the product and shop for this inventory item"})]}),(0,s.jsx)(d.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"product",className:"text-sm font-medium text-gray-700",children:"Product *"}),(0,s.jsxs)(w,{open:ef,onOpenChange:ej,children:[(0,s.jsx)(S,{asChild:!0,children:(0,s.jsxs)(o.$,{variant:"outline",role:"combobox","aria-expanded":ef,className:"w-full justify-between border-gray-300 focus:border-blue-500 focus:ring-blue-500",disabled:eu||!!N,children:[eu?"Loading products...":Y?"".concat(Y.name).concat(Y.generic_name?" (".concat(Y.generic_name,")"):""):"Select product...",(0,s.jsx)(B.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,s.jsx)(C,{className:"w-[400px] p-0",align:"start",children:(0,s.jsxs)(b,{shouldFilter:!1,children:[(0,s.jsx)(f,{placeholder:"Search products...",value:eN,onValueChange:ew}),(0,s.jsx)(j,{children:eN?"No products found matching your search.":"No products available."}),(0,s.jsx)(y,{className:"max-h-64 overflow-auto",children:eP.map(e=>(0,s.jsxs)(v,{value:"".concat(e.name,"-").concat(e.id),onSelect:()=>(e=>{let t=et.find(t=>t.id.toString()===e);t&&(H(t),ev(t.name+(t.generic_name?" (".concat(t.generic_name,")"):"")),Z(e=>({...e,product:t.id})),ej(!1))})(e.id.toString()),className:"cursor-pointer",children:[(0,s.jsx)(D.A,{className:"mr-2 h-4 w-4 ".concat((null==Y?void 0:Y.id)===e.id?"opacity-100":"opacity-0")}),(0,s.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,s.jsx)("span",{className:"font-medium",children:e.name}),e.generic_name&&(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["Generic: ",e.generic_name]}),e.supplier&&(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:["Supplier: ",e.supplier]})]})]},e.id))})]})})]}),Y&&(0,s.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-200",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-blue-800",children:Y.name}),Y.generic_name&&(0,s.jsxs)("p",{className:"text-xs text-blue-600",children:["Generic: ",Y.generic_name]}),Y.description&&(0,s.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:Y.description}),Y.supplier&&(0,s.jsxs)("p",{className:"text-xs text-blue-600",children:["Supplier: ",Y.supplier]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"shop",className:"text-sm font-medium text-gray-700",children:"Shop *"}),(0,s.jsxs)(m.l6,{value:U.shop.toString(),onValueChange:e=>ek("shop",parseInt(e)),disabled:em||!!N,children:[(0,s.jsx)(m.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,s.jsx)(m.yv,{placeholder:em?"Loading shops...":"Select shop"})}),(0,s.jsx)(m.gC,{children:es.map(e=>(0,s.jsx)(m.eb,{value:e.id.toString(),children:e.name},e.id))})]})]})]})})]}),(0,s.jsxs)(d.Zp,{className:"border-gray-200 shadow-sm",children:[(0,s.jsxs)(d.aR,{className:"bg-gray-50/50",children:[(0,s.jsxs)(d.ZB,{className:"text-lg font-semibold text-gray-800",children:[(0,s.jsx)(L.A,{className:"inline-block w-5 h-5 mr-2"}),"Basic Information"]}),(0,s.jsx)(d.BT,{className:"text-gray-600",children:"Enter batch details and identification data"})]}),(0,s.jsx)(d.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"batch_number",className:"text-sm font-medium text-gray-700",children:"Batch Number *"}),(0,s.jsx)(u.p,{id:"batch_number",value:U.batch_number,onChange:e=>ek("batch_number",e.target.value),placeholder:"Enter batch number",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"barcode",className:"text-sm font-medium text-gray-700",children:"Barcode"}),(0,s.jsx)(u.p,{id:"barcode",value:U.barcode,onChange:e=>ek("barcode",e.target.value),placeholder:"Enter barcode (optional)",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"purchase_date",className:"text-sm font-medium text-gray-700",children:"Purchase Date *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.p,{id:"purchase_date",type:"date",value:U.purchase_date,onChange:e=>ek("purchase_date",e.target.value),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 pr-10",required:!0}),(0,s.jsx)(E.A,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"expiry_date",className:"text-sm font-medium text-gray-700",children:"Expiry Date"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.p,{id:"expiry_date",type:"date",value:U.expiry_date,onChange:e=>ek("expiry_date",e.target.value),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 pr-10",min:new Date().toISOString().split("T")[0]}),(0,s.jsx)(E.A,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400 pointer-events-none"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Product expiration date for inventory tracking and safety"})]})]})})]}),(0,s.jsxs)(d.Zp,{className:"border-orange-200 shadow-sm",children:[(0,s.jsxs)(d.aR,{className:"bg-orange-50/50",children:[(0,s.jsx)(d.ZB,{className:"text-lg font-semibold text-orange-800",children:"Product Classification"}),(0,s.jsx)(d.BT,{className:"text-orange-600",children:"Specify the medical and regulatory classification"})]}),(0,s.jsx)(d.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"user_type",className:"text-sm font-medium text-gray-700",children:"User Type"}),(0,s.jsxs)(m.l6,{value:U.user_type,onValueChange:e=>ek("user_type",e),children:[(0,s.jsx)(m.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,s.jsx)(m.yv,{placeholder:"Select user type"})}),(0,s.jsxs)(m.gC,{children:[(0,s.jsx)(m.eb,{value:"adults",children:"Adults"}),(0,s.jsx)(m.eb,{value:"children",children:"Children"}),(0,s.jsx)(m.eb,{value:"both",children:"Adults & Children"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"drug_type",className:"text-sm font-medium text-gray-700",children:"Drug Type"}),(0,s.jsxs)(m.l6,{value:U.drug_type,onValueChange:e=>ek("drug_type",e),disabled:e_,children:[(0,s.jsx)(m.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,s.jsx)(m.yv,{placeholder:e_?"Loading...":"Select drug type"})}),(0,s.jsx)(m.gC,{children:en.map(e=>(0,s.jsx)(m.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"form",className:"text-sm font-medium text-gray-700",children:"Form"}),(0,s.jsxs)(m.l6,{value:U.form,onValueChange:e=>ek("form",e),children:[(0,s.jsx)(m.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,s.jsx)(m.yv,{placeholder:"Select form"})}),(0,s.jsxs)(m.gC,{children:[(0,s.jsx)(m.eb,{value:"tablet",children:"Tablet"}),(0,s.jsx)(m.eb,{value:"capsule",children:"Capsule"}),(0,s.jsx)(m.eb,{value:"syrup",children:"Syrup"}),(0,s.jsx)(m.eb,{value:"injection",children:"Injection"}),(0,s.jsx)(m.eb,{value:"cream",children:"Cream"}),(0,s.jsx)(m.eb,{value:"drops",children:"Drops"}),(0,s.jsx)(m.eb,{value:"inhaler",children:"Inhaler"}),(0,s.jsx)(m.eb,{value:"other",children:"Other"})]})]})]})]})})]}),(0,s.jsxs)(d.Zp,{className:"border-green-200 shadow-sm",children:[(0,s.jsxs)(d.aR,{className:"bg-green-50/50",children:[(0,s.jsx)(d.ZB,{className:"text-lg font-semibold text-green-800",children:"Product Pricing & Units"}),(0,s.jsx)(d.BT,{className:"text-green-600",children:"Set product-level pricing and unit information"})]}),(0,s.jsx)(d.Wu,{className:"pt-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"total_units",className:"text-sm font-medium text-gray-700",children:"Total Units * (specify the number of individual units stock)"}),(0,s.jsx)(u.p,{id:"total_units",type:"number",min:"1",value:U.total_units,onChange:e=>ek("total_units",parseInt(e.target.value)||1),placeholder:"e.g., 10",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"ie. No. of Containers with maramoja is one unit, 10 containers = 10 units"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"pieces_per_unit",className:"text-sm font-medium text-gray-700",children:"Pieces per Unit * (based on the total pieces contained in a unit, box, bottle)"}),(0,s.jsx)(u.p,{id:"pieces_per_unit",type:"number",min:"1",value:U.pieces_per_unit,onChange:e=>ek("pieces_per_unit",parseInt(e.target.value)||1),placeholder:"e.g., 20",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Number of individual pieces in each unit (e.g., 20 tablets per bottle)"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"unit_of_measurement",className:"text-sm font-medium text-gray-700",children:"Unit of Measurement"}),(0,s.jsxs)(m.l6,{value:U.unit_of_measurement,onValueChange:e=>ek("unit_of_measurement",e),disabled:e_,children:[(0,s.jsx)(m.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,s.jsx)(m.yv,{placeholder:e_?"Loading...":"Select unit"})}),(0,s.jsx)(m.gC,{children:eo.map(e=>(0,s.jsx)(m.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"product_description",className:"text-sm font-medium text-gray-700",children:"Product Description"}),(0,s.jsx)(u.p,{id:"product_description",value:U.product_description,onChange:e=>ek("product_description",e.target.value),placeholder:"e.g., '50 tablets per unit', '100ml bottle'",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Optional description of the product packaging"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"buying_price_per_unit",className:"text-sm font-medium text-gray-700",children:"Buying Price per Unit * (Cost of each unit from supplier)"}),(0,s.jsx)(u.p,{id:"buying_price_per_unit",type:"number",min:"0",step:"0.01",value:U.buying_price_per_unit,onChange:e=>ek("buying_price_per_unit",parseFloat(e.target.value)||0),placeholder:"e.g., 200.00",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Cost price for each complete unit from supplier"}),U.buying_price_per_unit>0&&U.pieces_per_unit>0&&U.cost_price_per_piece>0&&(0,s.jsx)("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-200",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800 font-medium",children:["\uD83D\uDCA1 Calculated Price per Piece: ",U.cost_price_per_piece||0]})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"selling_price_per_piece",className:"text-sm font-medium text-gray-700",children:"Selling Price per Piece *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.p,{id:"selling_price_per_piece",type:"number",min:"0",step:"0.01",value:U.selling_price_per_piece,onChange:e=>ek("selling_price_per_piece",parseFloat(e.target.value)||0),placeholder:"e.g., 30.00",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 pr-10",required:!0}),X&&(0,s.jsx)(o.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-8 w-8 p-0",onClick:()=>ek("selling_price_per_piece",X),title:"Use calculated price",children:(0,s.jsx)(I.A,{className:"h-4 w-4"})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Retail price for individual pieces sold to customers"}),X&&(0,s.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-200",children:[(0,s.jsxs)("p",{className:"text-sm text-blue-800 font-medium",children:["\uD83D\uDCA1 Calculated Selling Price: ",X.toFixed(2)]}),(0,s.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"Based on 30% markup, rounded to nearest 10"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"reorder_level",className:"text-sm font-medium text-gray-700",children:"Reorder Level"}),(0,s.jsx)(u.p,{id:"reorder_level",type:"number",min:"0",value:U.reorder_level,onChange:e=>ek("reorder_level",parseInt(e.target.value)||10),placeholder:"e.g., 50",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Minimum stock level before reordering"})]})]})})]}),U.buying_price_per_unit>0&&U.pieces_per_unit>0&&U.total_units>0&&(0,s.jsxs)(d.Zp,{className:"border-indigo-200 shadow-sm bg-gradient-to-r from-indigo-50 to-purple-50",children:[(0,s.jsx)(d.aR,{children:(0,s.jsx)(d.ZB,{className:"text-lg font-semibold text-indigo-800",children:"\uD83D\uDCCA Purchase Summary"})}),(0,s.jsx)(d.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"bg-white p-3 rounded-lg border",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Total Pieces"}),(0,s.jsx)("p",{className:"text-xl font-bold text-purple-600",children:(U.pieces_per_unit*U.total_units).toLocaleString()})]}),(0,s.jsxs)("div",{className:"bg-white p-3 rounded-lg border",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Total Cost"}),(0,s.jsx)("p",{className:"text-xl font-bold text-red-600",children:(U.buying_price_per_unit*U.total_units).toLocaleString()})]}),(0,s.jsxs)("div",{className:"bg-white p-3 rounded-lg border",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Potential Revenue"}),(0,s.jsx)("p",{className:"text-xl font-bold text-green-600",children:(U.selling_price_per_piece*U.pieces_per_unit*U.total_units).toLocaleString()})]}),(0,s.jsxs)("div",{className:"bg-white p-3 rounded-lg border",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Potential Profit"}),(0,s.jsx)("p",{className:"text-xl font-bold text-blue-600",children:((U.selling_price_per_piece-U.cost_price_per_piece)*U.pieces_per_unit*U.total_units).toLocaleString()})]})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[!_&&(0,s.jsx)(o.$,{type:"button",variant:"outline",onClick:h,disabled:O,className:"min-w-[100px]",children:"Cancel"}),(0,s.jsx)(o.$,{type:"submit",disabled:O,className:"min-w-[120px] bg-blue-600 hover:bg-blue-700",children:O?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J.A,{className:"mr-2 h-4 w-4 animate-spin"}),N?"Updating...":"Creating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R.A,{className:"mr-2 h-4 w-4"}),N?"Update Inventory":"Add to Inventory"]})})]})]})]});return _||r?_?eD:(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex justify-end pointer-events-none",children:(0,s.jsxs)("div",{className:"bg-white w-full max-w-4xl h-full overflow-y-auto shadow-2xl pointer-events-auto",children:[(0,s.jsx)("div",{className:"sticky top-0 bg-white border-b p-6 z-10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:N?"Edit Inventory Item":"Add Product from Purchase Order"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:N?"Update inventory item details and purchase information":"Create a new inventory item by selecting a purchase order and product details"})]}),(0,s.jsx)(o.$,{variant:"ghost",size:"icon",onClick:h,className:"h-8 w-8",children:(0,s.jsx)(T.A,{className:"h-4 w-4"})})]})}),(0,s.jsx)("div",{className:"p-6",children:eD})]})}):null}},99840:(e,t,r)=>{r.d(t,{Cf:()=>d,Es:()=>p,L3:()=>m,c7:()=>u,lG:()=>n,rr:()=>x});var s=r(95155);r(12115);var a=r(87435),i=r(54416),l=r(53999);function n(e){let{...t}=e;return(0,s.jsx)(a.bL,{"data-slot":"dialog",...t})}function c(e){let{...t}=e;return(0,s.jsx)(a.ZL,{"data-slot":"dialog-portal",...t})}function o(e){let{className:t,...r}=e;return(0,s.jsx)(a.hJ,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...r})}function d(e){let{className:t,children:r,showCloseButton:n=!0,...d}=e;return(0,s.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,s.jsx)(o,{}),(0,s.jsxs)(a.UC,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...d,children:[r,n&&(0,s.jsxs)(a.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",t),...r})}function p(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...r})}function m(e){let{className:t,...r}=e;return(0,s.jsx)(a.hE,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",t),...r})}function x(e){let{className:t,...r}=e;return(0,s.jsx)(a.VY,{"data-slot":"dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",t),...r})}}}]);