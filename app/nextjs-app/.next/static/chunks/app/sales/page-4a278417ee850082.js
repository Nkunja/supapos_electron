(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9117],{11711:(e,t,s)=>{Promise.resolve().then(s.bind(s,18682))},14186:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},17580:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},18682:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(95155),l=s(12115),r=s(27809),c=s(72713),n=s(37108),i=s(17580),d=s(92138),o=s(14186),m=s(6874),h=s.n(m),u=s(51162);function x(){let[e,t]=(0,l.useState)(null),[s,m]=(0,l.useState)([]),[x,p]=(0,l.useState)(!0),[y,g]=(0,l.useState)(!0),[v,f]=(0,l.useState)([]),[j,b]=(0,l.useState)([]);if((0,l.useEffect)(()=>{(async()=>{try{let e=await (0,u.sV)("7");t(e);let s=await (0,u.my)(3);m(s.results||[])}catch(e){console.error("Error loading dashboard data:",e),t({shop:{id:1,name:"Business"},period_days:7,summary:{total_sales:0,total_invoices:0,total_items_sold:0,average_invoice_value:0},top_products:[]})}finally{p(!1)}})()},[]),(0,l.useMemo)(()=>{let e={totalAmount:0,totalPaid:0,totalTax:0,totalDiscount:0,invoiceCount:v.length};return v.forEach(t=>{e.totalAmount+=Number(t.total_amount)||0,e.totalPaid+=Number(t.amount_paid)||0,e.totalTax+=Number(t.tax_amount)||0,e.totalDiscount+=Number(t.discount_amount)||0}),e},[v]),x)return(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});let N=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),w=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),k=[{title:"Make a Sale",description:"Start a new sales transaction",icon:r.A,href:"/sales/pos",color:"blue"},{title:"View Reports",description:"Check sales analytics",icon:c.A,href:"/sales/reports",color:"green"},{title:"Manage Inventory",description:"Check stock levels",icon:n.A,href:"/sales/inventory",color:"purple"},{title:"Process Returns",description:"Handle returns & refunds",icon:i.A,href:"/sales/returns",color:"orange"}];return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-8 text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Welcome Back!"}),(0,a.jsxs)("p",{className:"text-blue-100 text-lg",children:[N," • ",w]}),(0,a.jsx)("p",{className:"text-blue-200 mt-2",children:"Ready to manage your business sales and inventory"})]}),(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-blue-100",children:"System Status"}),(0,a.jsxs)("div",{className:"flex items-center justify-end mt-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full mr-2 animate-pulse"}),(0,a.jsx)("span",{className:"font-medium",children:"All Systems Online"})]})]})})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-8 border border-gray-100",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Quick Actions"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:k.map(e=>{let t=e.icon;return(0,a.jsx)(h(),{href:e.href,className:"\n                  block p-6 rounded-xl border-2 transition-all duration-200 hover:shadow-md\n                ",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mb-4 bg-white shadow-sm",children:(0,a.jsx)(t,{className:"w-6 h-6"})}),(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-sm opacity-80 mb-3",children:e.description}),(0,a.jsx)(d.A,{className:"w-4 h-4"})]})},e.title)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Recent Sales"}),(0,a.jsx)(h(),{href:"/sales/reports",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View all →"})]}),s.length>0?(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:(0,a.jsx)(r.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:["#",e.invoice_number]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.customer_name})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold text-gray-900",children:["KSH ",parseFloat(e.total_amount).toLocaleString()]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(r.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No recent sales"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"System Overview"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:(0,a.jsx)(o.A,{className:"w-5 h-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-800",children:"System Backup"}),(0,a.jsx)("p",{className:"text-sm text-green-600",children:"Completed successfully"})]})]}),(0,a.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Today"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:(0,a.jsx)(n.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-blue-800",children:"Inventory Status"}),(0,a.jsx)("p",{className:"text-sm text-blue-600",children:"All systems normal"})]})]}),(0,a.jsx)("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:"Online"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:(0,a.jsx)(i.A,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-purple-800",children:"Active Session"}),(0,a.jsx)("p",{className:"text-sm text-purple-600",children:"Ready for transactions"})]})]}),(0,a.jsx)("span",{className:"text-xs text-purple-600 bg-purple-100 px-2 py-1 rounded",children:"Active"})]})]})]})]})]})}},27809:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},37108:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},39740:(e,t,s)=>{"use strict";s.d(t,{t:()=>r}),s(8102);var a=s(61778);let l="".concat("https://supa.sirnkunja.co.ke/","api/invoices/sales_summary/?period_days=30"),r=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30";arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return console.log("\uD83D\uDD04 Fetching sales summary from API for ".concat(e," days")),(await a.default.get("".concat(l,"?period_days=").concat(e))).data}catch(e){throw Error("Failed to fetch sales summary.")}}},51162:(e,t,s)=>{"use strict";s.d(t,{Aq:()=>u,Cb:()=>m,de:()=>h,my:()=>o,sV:()=>d}),s(8102);var a=s(61778);let l="".concat("https://supa.sirnkunja.co.ke/","api/invoices/"),r=async e=>{try{let t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.date_from)&&t.append("date_from",e.date_from),(null==e?void 0:e.date_to)&&t.append("date_to",e.date_to),(null==e?void 0:e.shop)&&t.append("shop",e.shop);let s=t.toString()?"".concat(l,"?").concat(t.toString()):l;return(await a.default.get(s)).data}catch(e){throw Error("Failed to fetch invoices.")}},c=async e=>{try{return(await a.default.post(l,e)).data}catch(e){throw Error("Failed to create invoice.")}};var n=s(43114),i=s(39740);let d=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30";try{return await (0,i.t)(e)}catch(e){throw Error("Failed to fetch sales statistics.")}},o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{console.log("\uD83D\uDD04 Fetching recent invoices from API");let t=await r({page:"1"});return Array.isArray(null==t?void 0:t.results)&&t.results.length&&(t.results=t.results.slice(0,e)),t}catch(e){throw Error("Failed to fetch recent invoices.")}},m=async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{console.log("\uD83D\uDD04 Fetching fresh invoices from API");let e=await r({});return Array.isArray(null==e?void 0:e.results)&&e.results.length&&(e.results=e.results.slice(0,e.count)),e}catch(e){throw Error("Failed to fetch all invoices.")}},h=async e=>{try{return await (0,n.ZK)({search:e})}catch(e){throw Error("Failed to fetch products for sale.")}},u=async e=>{try{return await c(e)}catch(e){throw Error("Failed to create sales invoice.")}}},72713:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},92138:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])}},e=>{e.O(0,[6586,6373,6874,1778,3114,8441,5964,7358],()=>e(e.s=11711)),_N_E=e.O()}]);