(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7204],{15742:(e,s,a)=>{"use strict";a.d(s,{$D:()=>o,OC:()=>c,Qe:()=>d,YQ:()=>l,_d:()=>i,zC:()=>n});var t=a(61778);let r="https://supa.sirnkunja.co.ke/",l=async()=>{try{let e=await t.default.get("".concat(r,"api/vendors/"));return Array.isArray(e.data)?e.data:e.data.results||[]}catch(e){throw console.error("API Error - getVendors:",e),Error("Failed to fetch vendors.")}},n=async e=>{try{return(await t.default.post("".concat(r,"api/vendors/"),e)).data}catch(e){var s,a;throw console.error("API Error - createVendor:",e),Error((null==(a=e.response)||null==(s=a.data)?void 0:s.message)||e.message||"Failed to create vendor.")}},i=async(e,s)=>{try{return(await t.default.patch("".concat(r,"api/vendors/").concat(e,"/"),s)).data}catch(s){var a,l;throw console.error("API Error - updateVendor(".concat(e,"):"),s),Error((null==(l=s.response)||null==(a=l.data)?void 0:a.message)||s.message||"Failed to update vendor with ID ".concat(e,"."))}},c=async e=>{try{await t.default.delete("".concat(r,"api/vendors/").concat(e,"/"))}catch(t){var s,a,l;if(console.error("API Error - deleteVendor(".concat(e,"):"),t),(null==(s=t.response)?void 0:s.status)===403)throw Error("Only admin users can delete vendors.");throw Error((null==(l=t.response)||null==(a=l.data)?void 0:a.message)||t.message||"Failed to delete vendor with ID ".concat(e,"."))}},d=async e=>{try{return(await t.default.post("".concat(r,"api/vendors/").concat(e,"/activate/"))).data}catch(t){var s,a;throw console.error("API Error - activateVendor(".concat(e,"):"),t),Error((null==(a=t.response)||null==(s=a.data)?void 0:s.message)||t.message||"Failed to activate vendor with ID ".concat(e,"."))}},o=async e=>{try{return(await t.default.post("".concat(r,"api/vendors/").concat(e,"/deactivate/"))).data}catch(t){var s,a;throw console.error("API Error - deactivateVendor(".concat(e,"):"),t),Error((null==(a=t.response)||null==(s=a.data)?void 0:s.message)||t.message||"Failed to deactivate vendor with ID ".concat(e,"."))}}},26582:(e,s,a)=>{Promise.resolve().then(a.bind(a,81641))},49026:(e,s,a)=>{"use strict";a.d(s,{Fc:()=>i,TN:()=>c});var t=a(95155);a(12115);var r=a(74466),l=a(53999);let n=(0,r.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,l.cn)(n({variant:a}),s),...r})}function c(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,l.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...a})}},67133:(e,s,a)=>{"use strict";a.d(s,{SQ:()=>c,_2:()=>d,lp:()=>o,mB:()=>m,rI:()=>n,ty:()=>i});var t=a(95155);a(12115);var r=a(48698),l=a(53999);function n(e){let{...s}=e;return(0,t.jsx)(r.bL,{"data-slot":"dropdown-menu",...s})}function i(e){let{...s}=e;return(0,t.jsx)(r.l9,{"data-slot":"dropdown-menu-trigger",...s})}function c(e){let{className:s,sideOffset:a=4,...n}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsx)(r.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...n})})}function d(e){let{className:s,inset:a,variant:n="default",...i}=e;return(0,t.jsx)(r.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":n,className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i})}function o(e){let{className:s,inset:a,...n}=e;return(0,t.jsx)(r.JU,{"data-slot":"dropdown-menu-label","data-inset":a,className:(0,l.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",s),...n})}function m(e){let{className:s,...a}=e;return(0,t.jsx)(r.wv,{"data-slot":"dropdown-menu-separator",className:(0,l.cn)("bg-border -mx-1 my-1 h-px",s),...a})}},81641:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>O});var t=a(95155),r=a(12115),l=a(15742),n=a(97168),i=a(89852),c=a(88524),d=a(88482),o=a(88145),m=a(67133),u=a(38543),x=a(51154),h=a(17576),g=a(84616),p=a(40646),v=a(47924),j=a(19420),f=a(28883),y=a(5623),b=a(92657),N=a(13717),w=a(54861),A=a(62525),_=a(5540),C=a(82714),S=a(49026),k=a(95784),E=a(95139),F=a(54416),V=a(1243),R=a(4516),I=a(57434),Z=a(55868),D=a(4229),L=a(97502);let z={name:"",contact_person:"",email:"",phone:"",address:"",vendor_type:"",license_number:"",tax_id:"",credit_limit:null,payment_terms:"",status:"",notes:"",shop:null};function B(e){var s,a;let{isOpen:c,onClose:o,vendor:m,onSuccess:g}=e,{user:v}=(0,L.Z)(),[y,b]=(0,r.useState)(z),[N,w]=(0,r.useState)(!1),[A,B]=(0,r.useState)(""),[W,P]=(0,r.useState)(""),[T,J]=(0,r.useState)([]),[$,U]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c&&O()},[c]),(0,r.useEffect)(()=>{if(m){var e;b({name:m.name||"",contact_person:m.contact_person||"",email:m.email||"",phone:m.phone||"",address:m.address||"",vendor_type:m.vendor_type||"",license_number:m.license_number||"",tax_id:m.tax_id||"",credit_limit:m.credit_limit||null,payment_terms:m.payment_terms||"",status:m.status||"",notes:m.notes||"",shop:"number"==typeof m.shop?m.shop:(null==(e=m.shop)?void 0:e.id)||null})}else b(z);B(""),P("")},[m,c]);let O=async()=>{U(!0);try{let e=await (0,_.KZ)();J(Array.isArray(e)?e:[])}catch(e){u.oR.error("Failed to load shops"),J([])}finally{U(!1)}},M=(e,s)=>{b(a=>({...a,[e]:s})),A&&B(""),W&&P("")},q=async e=>{if(e.preventDefault(),y.name.trim()?null===y.credit_limit||!(y.credit_limit<0)||(B("Credit limit cannot be negative"),!1):(B("Vendor name is required"),!1)){w(!0),B(""),P("");try{var s;let e={name:y.name,contact_person:y.contact_person||void 0,email:y.email||void 0,phone:y.phone||void 0,address:y.address||void 0,vendor_type:y.vendor_type||void 0,license_number:y.license_number||void 0,tax_id:y.tax_id||void 0,credit_limit:null!=(s=y.credit_limit)?s:void 0,payment_terms:y.payment_terms||void 0,status:y.status||void 0,notes:y.notes||void 0,shop:y.shop||void 0};m?(await (0,l._d)(m.id,e),u.oR.success("Vendor updated successfully!"),P("Vendor updated successfully!")):(await (0,l.zC)(e),u.oR.success("Vendor created successfully!"),P("Vendor created successfully!")),g(),b(z),o()}catch(s){let e=s.message||"An error occurred";B(e),u.oR.error(e)}finally{w(!1)}}},Q=(null==v?void 0:v.role)!=="admin"&&!!m;return c?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex justify-end pointer-events-none",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-4xl h-full overflow-y-auto shadow-2xl pointer-events-auto",children:[(0,t.jsx)("div",{className:"sticky top-0 bg-white border-b p-6 z-10",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Vendor":"Add New Vendor"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:m?"Update vendor information":"Create a new vendor profile"})]}),(0,t.jsx)(n.$,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8",children:(0,t.jsx)(F.A,{className:"h-4 w-4"})})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[A&&(0,t.jsxs)(S.Fc,{className:"border-red-200 bg-red-50",children:[(0,t.jsx)(V.A,{className:"h-4 w-4 text-red-600"}),(0,t.jsx)(S.TN,{className:"text-red-800",children:A})]}),W&&(0,t.jsxs)(S.Fc,{className:"border-green-200 bg-green-50",children:[(0,t.jsx)(p.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)(S.TN,{className:"text-green-800",children:W})]}),(0,t.jsxs)("form",{onSubmit:q,className:"space-y-6",children:[(0,t.jsxs)(d.Zp,{className:"border-gray-200 shadow-sm",children:[(0,t.jsxs)(d.aR,{className:"bg-gray-50/50",children:[(0,t.jsxs)(d.ZB,{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(h.A,{className:"mr-2 h-5 w-5"}),"Vendor Information"]}),(0,t.jsx)(d.BT,{className:"text-gray-600",children:"Basic vendor details"})]}),(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(C.J,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:["Vendor Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(i.p,{id:"name",value:y.name,onChange:e=>M("name",e.target.value),placeholder:"Enter vendor name",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"contact_person",className:"text-sm font-medium text-gray-700",children:"Contact Person"}),(0,t.jsx)(i.p,{id:"contact_person",value:y.contact_person,onChange:e=>M("contact_person",e.target.value),placeholder:"Enter contact person name",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"vendor_type",className:"text-sm font-medium text-gray-700",children:"Vendor Type"}),(0,t.jsxs)(k.l6,{value:y.vendor_type,onValueChange:e=>M("vendor_type",e),children:[(0,t.jsx)(k.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,t.jsx)(k.yv,{placeholder:"Select vendor type"})}),(0,t.jsxs)(k.gC,{children:[(0,t.jsx)(k.eb,{value:"manufacturer",children:"Manufacturer"}),(0,t.jsx)(k.eb,{value:"wholesaler",children:"Wholesaler"}),(0,t.jsx)(k.eb,{value:"distributor",children:"Distributor"}),(0,t.jsx)(k.eb,{value:"local_supplier",children:"Local Supplier"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"status",className:"text-sm font-medium text-gray-700",children:"Status"}),(0,t.jsxs)(k.l6,{value:y.status,onValueChange:e=>M("status",e),children:[(0,t.jsx)(k.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,t.jsx)(k.yv,{placeholder:"Select status"})}),(0,t.jsxs)(k.gC,{children:[(0,t.jsx)(k.eb,{value:"active",children:"Active"}),(0,t.jsx)(k.eb,{value:"inactive",children:"Inactive"}),(0,t.jsx)(k.eb,{value:"suspended",children:"Suspended"})]})]})]})]})})]}),(0,t.jsxs)(d.Zp,{className:"border-gray-200 shadow-sm",children:[(0,t.jsx)(d.aR,{className:"bg-gray-50/50",children:(0,t.jsxs)(d.ZB,{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(j.A,{className:"mr-2 h-5 w-5"}),"Contact Information"]})}),(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"Phone Number"}),(0,t.jsx)(i.p,{id:"phone",value:y.phone,onChange:e=>M("phone",e.target.value),placeholder:"Enter phone number",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email Address"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(f.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(i.p,{id:"email",type:"email",value:y.email,onChange:e=>M("email",e.target.value),placeholder:"Enter email address",className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,t.jsx)(C.J,{htmlFor:"address",className:"text-sm font-medium text-gray-700",children:"Address"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(R.A,{className:"absolute left-3 top-3 text-gray-400 h-4 w-4"}),(0,t.jsx)("textarea",{id:"address",value:y.address,onChange:e=>M("address",e.target.value),placeholder:"Enter address",className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]})]})]})})]}),(0,t.jsxs)(d.Zp,{className:"border-gray-200 shadow-sm",children:[(0,t.jsx)(d.aR,{className:"bg-gray-50/50",children:(0,t.jsxs)(d.ZB,{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(I.A,{className:"mr-2 h-5 w-5"}),"Business Details"]})}),(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"license_number",className:"text-sm font-medium text-gray-700",children:"License Number"}),(0,t.jsx)(i.p,{id:"license_number",value:y.license_number,onChange:e=>M("license_number",e.target.value),placeholder:"Enter license number",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"tax_id",className:"text-sm font-medium text-gray-700",children:"Tax ID"}),(0,t.jsx)(i.p,{id:"tax_id",value:y.tax_id,onChange:e=>M("tax_id",e.target.value),placeholder:"Enter tax ID",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"credit_limit",className:"text-sm font-medium text-gray-700",children:"Credit Limit"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(Z.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(i.p,{id:"credit_limit",type:"number",step:"0.01",min:"0",value:null!=(a=y.credit_limit)?a:"",onChange:e=>M("credit_limit",e.target.value?parseFloat(e.target.value):null),placeholder:"Enter credit limit",className:"pl-10 border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"payment_terms",className:"text-sm font-medium text-gray-700",children:"Payment Terms"}),(0,t.jsx)(i.p,{id:"payment_terms",value:y.payment_terms,onChange:e=>M("payment_terms",e.target.value),placeholder:"e.g., Net 30, COD",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"shop",className:"text-sm font-medium text-gray-700",children:"Shop"}),(0,t.jsxs)(k.l6,{value:(null==(s=y.shop)?void 0:s.toString())||"none",onValueChange:e=>{"none"===e?M("shop",null):M("shop",parseInt(e))},disabled:Q,children:[(0,t.jsx)(k.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,t.jsx)(k.yv,{placeholder:"Select a shop"})}),(0,t.jsxs)(k.gC,{children:[(0,t.jsx)(k.eb,{value:"none",children:"No shop selected"}),$?(0,t.jsxs)(k.eb,{value:"loading",disabled:!0,children:[(0,t.jsx)(x.A,{className:"h-4 w-4 animate-spin mr-2"}),"Loading shops..."]}):T.map(e=>(0,t.jsx)(k.eb,{value:e.id.toString(),children:e.name},e.id))]})]}),Q&&(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Shop can only be changed by administrators"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(E.S,{id:"status",checked:"active"===y.status,onCheckedChange:e=>M("status",e?"active":"inactive")}),(0,t.jsx)(C.J,{htmlFor:"status",className:"text-sm font-medium text-gray-700",children:"Active Vendor"})]})]})})]}),(0,t.jsxs)(d.Zp,{className:"border-gray-200 shadow-sm",children:[(0,t.jsx)(d.aR,{className:"bg-gray-50/50",children:(0,t.jsxs)(d.ZB,{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(I.A,{className:"mr-2 h-5 w-5"}),"Additional Information"]})}),(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"notes",className:"text-sm font-medium text-gray-700",children:"Notes"}),(0,t.jsx)("textarea",{id:"notes",value:y.notes,onChange:e=>M("notes",e.target.value),placeholder:"Additional notes about the vendor",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:4})]})})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,t.jsx)(n.$,{type:"button",variant:"outline",onClick:o,disabled:N,className:"min-w-[100px]",children:"Cancel"}),(0,t.jsx)(n.$,{type:"submit",disabled:N,className:"min-w-[120px] bg-blue-600 hover:bg-blue-700",children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.A,{className:"mr-2 h-4 w-4"}),m?"Update Vendor":"Create Vendor"]})})]})]})]})]})}):null}var W=a(85339),P=a(71007),T=a(37108),J=a(69074);let $=e=>{let{icon:s,label:a,value:r,fallback:l="Not provided"}=e;return(0,t.jsxs)("div",{className:"flex items-start space-x-3 py-2",children:[(0,t.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:s}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:a}),(0,t.jsx)("p",{className:"text-sm text-gray-900 break-words",children:null!=r?r:(0,t.jsx)("span",{className:"text-gray-400 italic",children:l})})]})]})};function U(e){var s,a,l,i;let{isOpen:c,onClose:m,vendor:u}=e,[g,v]=(0,r.useState)([]),[y,b]=(0,r.useState)(!0),[N,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{c&&u&&A()},[c,u]);let A=async()=>{b(!0),w(null);try{let e=await (0,_.KZ)();v(Array.isArray(e)?e:[])}catch(e){console.error("Error loading data:",e),w("Failed to load additional information")}finally{b(!1)}},C=e=>{if(!e)return null;try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(s){return e}},S=e=>{switch(e){case"active":return"Active";case"inactive":return"Inactive";case"suspended":return"Suspended";default:return null}},k=e=>null==e?null:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);if(!c||!u)return null;let E=(null==u?void 0:u.purchase_orders)&&0!==u.purchase_orders.length?u.purchase_orders.map(e=>({id:e.id||0,name:e.name,total_amount:e.total_amount,status:e.status})):[],V=null!=(i=null!=(l=u.shop_name)?l:"number"==typeof u.shop?null==(s=g.find(e=>e.id===u.shop))?void 0:s.name:null==(a=u.shop)?void 0:a.name)?i:null;return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex justify-end pointer-events-none",children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-4xl h-full overflow-y-auto shadow-2xl pointer-events-auto",children:[(0,t.jsx)("div",{className:"sticky top-0 bg-white border-b p-6 z-10",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Vendor Details"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:u.name})]}),(0,t.jsx)(n.$,{variant:"ghost",size:"icon",onClick:m,className:"h-8 w-8",children:(0,t.jsx)(F.A,{className:"h-4 w-4"})})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[y&&(0,t.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,t.jsx)(x.A,{className:"h-6 w-6 animate-spin mr-2"}),(0,t.jsx)("span",{children:"Loading additional information..."})]}),N&&(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start space-x-2",children:[(0,t.jsx)(W.A,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-yellow-800 font-medium",children:"Warning"}),(0,t.jsx)("p",{className:"text-yellow-700 text-sm",children:N})]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsx)(o.E,{className:"active"===u.status?"bg-green-100 text-green-800":"inactive"===u.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",children:"active"===u.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.A,{className:"h-3 w-3 mr-1"}),"Active Vendor"]}):"inactive"===u.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W.A,{className:"h-3 w-3 mr-1"}),"Inactive Vendor"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W.A,{className:"h-3 w-3 mr-1"}),"Suspended Vendor"]})})}),(0,t.jsxs)(d.Zp,{className:"border-gray-200 shadow-sm",children:[(0,t.jsx)(d.aR,{className:"bg-gray-50/50",children:(0,t.jsxs)(d.ZB,{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(h.A,{className:"mr-2 h-5 w-5"}),"Vendor Information"]})}),(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)($,{icon:(0,t.jsx)(h.A,{className:"h-4 w-4 text-gray-500"}),label:"Vendor Name",value:u.name}),(0,t.jsx)($,{icon:(0,t.jsx)(P.A,{className:"h-4 w-4 text-gray-500"}),label:"Contact Person",value:u.contact_person}),(0,t.jsx)($,{icon:(0,t.jsx)(h.A,{className:"h-4 w-4 text-gray-500"}),label:"Vendor Type",value:(e=>{switch(e){case"manufacturer":return"Manufacturer";case"wholesaler":return"Wholesaler";case"distributor":return"Distributor";case"local_supplier":return"Local Supplier";default:return null}})(u.vendor_type)}),(0,t.jsx)($,{icon:(0,t.jsx)(I.A,{className:"h-4 w-4 text-gray-500"}),label:"Status",value:S(u.status)})]})})]}),(0,t.jsxs)(d.Zp,{className:"border-gray-200 shadow-sm",children:[(0,t.jsx)(d.aR,{className:"bg-gray-50/50",children:(0,t.jsxs)(d.ZB,{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(j.A,{className:"mr-2 h-5 w-5"}),"Contact Information"]})}),(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)($,{icon:(0,t.jsx)(j.A,{className:"h-4 w-4 text-gray-500"}),label:"Phone Number",value:u.phone}),(0,t.jsx)($,{icon:(0,t.jsx)(f.A,{className:"h-4 w-4 text-gray-500"}),label:"Email Address",value:u.email}),(0,t.jsx)($,{icon:(0,t.jsx)(R.A,{className:"h-4 w-4 text-gray-500"}),label:"Address",value:u.address})]})})]}),(0,t.jsxs)(d.Zp,{className:"border-gray-200 shadow-sm",children:[(0,t.jsx)(d.aR,{className:"bg-gray-50/50",children:(0,t.jsxs)(d.ZB,{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(I.A,{className:"mr-2 h-5 w-5"}),"Business Details"]})}),(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)($,{icon:(0,t.jsx)(I.A,{className:"h-4 w-4 text-gray-500"}),label:"License Number",value:u.license_number}),(0,t.jsx)($,{icon:(0,t.jsx)(I.A,{className:"h-4 w-4 text-gray-500"}),label:"Tax ID",value:u.tax_id}),(0,t.jsx)($,{icon:(0,t.jsx)(Z.A,{className:"h-4 w-4 text-gray-500"}),label:"Credit Limit",value:k(u.credit_limit)}),(0,t.jsx)($,{icon:(0,t.jsx)(I.A,{className:"h-4 w-4 text-gray-500"}),label:"Payment Terms",value:u.payment_terms}),(0,t.jsx)($,{icon:(0,t.jsx)(h.A,{className:"h-4 w-4 text-gray-500"}),label:"Shop",value:y?"Loading...":V})]})})]}),(0,t.jsxs)(d.Zp,{className:"border-gray-200 shadow-sm",children:[(0,t.jsx)(d.aR,{className:"bg-gray-50/50",children:(0,t.jsxs)(d.ZB,{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(T.A,{className:"mr-2 h-5 w-5"}),"Purchase Orders (",u.total_orders||0,")"]})}),(0,t.jsx)(d.Wu,{className:"pt-6",children:y?(0,t.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 animate-spin mr-2"}),"Loading purchase orders..."]}):0===E.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(T.A,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No purchase orders on file"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map(e=>(0,t.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)(T.A,{className:"h-4 w-4 text-blue-500 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Total: ",k(Number(e.total_amount))]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Status: ",S(e.status)]})]})]})},e.id.toString()))})})]}),(0,t.jsxs)(d.Zp,{className:"border-gray-200 shadow-sm",children:[(0,t.jsx)(d.aR,{className:"bg-gray-50/50",children:(0,t.jsxs)(d.ZB,{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(J.A,{className:"mr-2 h-5 w-5"}),"Business Information"]})}),(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)($,{icon:(0,t.jsx)(J.A,{className:"h-4 w-4 text-gray-500"}),label:"Created Date",value:C(u.created_date)}),(0,t.jsx)($,{icon:(0,t.jsx)(J.A,{className:"h-4 w-4 text-gray-500"}),label:"Last Updated",value:C(u.updated_at)}),(0,t.jsx)($,{icon:(0,t.jsx)(Z.A,{className:"h-4 w-4 text-gray-500"}),label:"Total Purchased",value:k(u.total_amount_purchased)})]})})]}),(0,t.jsxs)(d.Zp,{className:"border-gray-200 shadow-sm",children:[(0,t.jsx)(d.aR,{className:"bg-gray-50/50",children:(0,t.jsxs)(d.ZB,{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(I.A,{className:"mr-2 h-5 w-5"}),"Notes"]})}),(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)($,{icon:(0,t.jsx)(I.A,{className:"h-4 w-4 text-gray-500"}),label:"Notes",value:u.notes})})})]})]})]})})}function O(){let[e,s]=(0,r.useState)([]),[a,_]=(0,r.useState)(!0),[C,S]=(0,r.useState)(null),[k,E]=(0,r.useState)(""),[F,V]=(0,r.useState)(!1),[R,I]=(0,r.useState)(!1),[Z,D]=(0,r.useState)(null),[L,z]=(0,r.useState)(null),[W,P]=(0,r.useState)(null),[T,J]=(0,r.useState)("all"),[$,O]=(0,r.useState)(0);(0,r.useEffect)(()=>{M()},[]);let M=async()=>{_(!0),S(null);try{let e=await (0,l.YQ)();Array.isArray(e)?(s(e),O(e.filter(e=>"active"===e.status).length)):(console.error("API returned unexpected data format:",e),s([]),O(0),S("Received unexpected data format from server"),u.oR.error("Failed to load vendors: Invalid data format"))}catch(e){console.error("Error loading vendors:",e),s([]),O(0),S(e.message||"Failed to load vendors"),u.oR.error(e.message||"Failed to load vendors")}finally{_(!1)}},q=()=>{D(null),V(!0)},Q=async e=>{if(!e.id)return void u.oR.error("Invalid vendor ID");try{await (0,l.Qe)(e.id),u.oR.success("Vendor ".concat(e.name," activated successfully")),M()}catch(e){u.oR.error(e.message||"Failed to activate vendor")}},H=async e=>{if(!e.id)return void u.oR.error("Invalid vendor ID");try{await (0,l.$D)(e.id),u.oR.success("Vendor ".concat(e.name," deactivated successfully")),M()}catch(e){u.oR.error(e.message||"Failed to deactivate vendor")}},K=async e=>{if(confirm("Are you sure you want to delete this vendor?")){P(e);try{await (0,l.OC)(e),u.oR.success("Vendor deleted successfully"),M()}catch(e){u.oR.error(e.message||"Failed to delete vendor")}finally{P(null)}}},X=e=>{switch(e){case"manufacturer":return"Manufacturer";case"wholesaler":return"Wholesaler";case"distributor":return"Distributor";case"local_supplier":return"Local Supplier";default:return"-"}},Y=Array.isArray(e)?e.filter(e=>{var s,a,t,r;if(!e)return!1;let l=(null==(s=e.name)?void 0:s.toLowerCase().includes(k.toLowerCase()))||(null==(a=e.email)?void 0:a.toLowerCase().includes(k.toLowerCase()))||(null==(t=e.phone)?void 0:t.includes(k))||(null==(r=e.contact_person)?void 0:r.toLowerCase().includes(k.toLowerCase())),n="all"===T||T===e.status;return l&&n}):[];return a?(0,t.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,t.jsx)(x.A,{className:"h-8 w-8 animate-spin"}),(0,t.jsx)("span",{className:"ml-2",children:"Loading vendors..."})]}):C?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.A,{className:"h-8 w-8 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Vendors"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your vendors"})]})]})}),(0,t.jsx)(d.Zp,{children:(0,t.jsxs)(d.Wu,{className:"pt-6 text-center",children:[(0,t.jsx)(h.A,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Vendors"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:C}),(0,t.jsxs)(n.$,{onClick:M,variant:"outline",children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Retry"]})]})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.A,{className:"h-8 w-8 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Vendors"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your vendors and their details"})]})]}),(0,t.jsxs)(n.$,{onClick:q,className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Add Vendor"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(d.Zp,{children:(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,t.jsx)(p.A,{className:"h-6 w-6 text-green-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Vendors"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$})]})]})})}),(0,t.jsx)(d.Zp,{children:(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(h.A,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Vendors"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Y.length})]})]})})})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(d.ZB,{children:["Vendors (",Y.length,")"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(n.$,{variant:"all"===T?"default":"outline",size:"sm",onClick:()=>J("all"),children:"All"}),(0,t.jsx)(n.$,{variant:"active"===T?"default":"outline",size:"sm",onClick:()=>J("active"),children:"Active"}),(0,t.jsx)(n.$,{variant:"inactive"===T?"default":"outline",size:"sm",onClick:()=>J("inactive"),children:"Inactive"}),(0,t.jsx)(n.$,{variant:"suspended"===T?"default":"outline",size:"sm",onClick:()=>J("suspended"),children:"Suspended"})]}),(0,t.jsxs)("div",{className:"relative w-72",children:[(0,t.jsx)(v.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(i.p,{placeholder:"Search vendors...",value:k,onChange:e=>E(e.target.value),className:"pl-10"})]})]})]})}),(0,t.jsx)(d.Wu,{children:0===Y.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(h.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No vendors found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:k?"Try adjusting your search criteria.":"Get started by adding your first vendor."}),!k&&(0,t.jsxs)(n.$,{onClick:q,children:[(0,t.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Add Vendor"]})]}):(0,t.jsxs)(c.XI,{children:[(0,t.jsx)(c.A0,{children:(0,t.jsxs)(c.Hj,{children:[(0,t.jsx)(c.nd,{children:"Name"}),(0,t.jsx)(c.nd,{children:"Phone"}),(0,t.jsx)(c.nd,{children:"Email"}),(0,t.jsx)(c.nd,{children:"Type"}),(0,t.jsx)(c.nd,{children:"Status"}),(0,t.jsx)(c.nd,{children:"Notes"}),(0,t.jsx)(c.nd,{className:"w-[50px]"})]})}),(0,t.jsx)(c.BF,{children:Y.map(e=>(0,t.jsxs)(c.Hj,{children:[(0,t.jsx)(c.nA,{className:"font-medium",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold",children:e.name}),e.contact_person&&(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.contact_person})]})}),(0,t.jsx)(c.nA,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 mr-2 text-gray-400"}),e.phone||"-"]})}),(0,t.jsx)(c.nA,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2 text-gray-400"}),e.email||"-"]})}),(0,t.jsx)(c.nA,{children:X(e.vendor_type)}),(0,t.jsx)(c.nA,{children:(0,t.jsx)(o.E,{className:(e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"suspended":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(e.status),children:X(e.status)})}),(0,t.jsx)(c.nA,{children:(0,t.jsx)("div",{className:"max-w-[150px] truncate",title:e.notes||"",children:e.notes||"N/A"})}),(0,t.jsx)(c.nA,{children:(0,t.jsxs)(m.rI,{children:[(0,t.jsx)(m.ty,{asChild:!0,children:(0,t.jsx)(n.$,{variant:"ghost",size:"sm",children:(0,t.jsx)(y.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(m.SQ,{align:"end",children:[(0,t.jsxs)(m._2,{onClick:()=>{z(e),I(!0)},children:[(0,t.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,t.jsxs)(m._2,{onClick:()=>{D(e),V(!0)},children:[(0,t.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),"active"!==e.status&&(0,t.jsxs)(m._2,{onClick:()=>Q(e),children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Activate"]}),"inactive"!==e.status&&(0,t.jsxs)(m._2,{onClick:()=>H(e),children:[(0,t.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Deactivate"]}),(0,t.jsxs)(m._2,{onClick:()=>e.id&&K(e.id),className:"text-red-600",disabled:W===e.id,children:[W===e.id?(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e.id||"vendor-".concat(Math.random())))})]})})]}),(0,t.jsx)(B,{isOpen:F,onClose:()=>V(!1),vendor:Z,onSuccess:()=>{M(),V(!1),D(null)}}),(0,t.jsx)(U,{isOpen:R,onClose:()=>I(!1),vendor:L})]})}},82714:(e,s,a)=>{"use strict";a.d(s,{J:()=>n});var t=a(95155);a(12115);var r=a(40968),l=a(53999);function n(e){let{className:s,...a}=e;return(0,t.jsx)(r.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}},88524:(e,s,a)=>{"use strict";a.d(s,{A0:()=>n,BF:()=>i,Hj:()=>c,XI:()=>l,nA:()=>o,nd:()=>d});var t=a(95155);a(12115);var r=a(53999);function l(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",s),...a})})}function n(e){let{className:s,...a}=e;return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",s),...a})}function i(e){let{className:s,...a}=e;return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",s),...a})}function c(e){let{className:s,...a}=e;return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...a})}function d(e){let{className:s,...a}=e;return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function o(e){let{className:s,...a}=e;return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}},89852:(e,s,a)=>{"use strict";a.d(s,{p:()=>l});var t=a(95155);a(12115);var r=a(53999);function l(e){let{className:s,type:a,...l}=e;return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...l})}},95139:(e,s,a)=>{"use strict";a.d(s,{S:()=>i});var t=a(95155);a(12115);var r=a(76981),l=a(5196),n=a(53999);function i(e){let{className:s,...a}=e;return(0,t.jsx)(r.bL,{"data-slot":"checkbox",className:(0,n.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,t.jsx)(r.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(l.A,{className:"size-3.5"})})})}},97502:(e,s,a)=>{"use strict";a.d(s,{AuthProvider:()=>o,Z:()=>d});var t=a(95155),r=a(61778),l=a(35695),n=a(12115),i=a(38543);let c=(0,n.createContext)({user:null,isLoggedIn:!1,loading:!0,authChecked:!1,serverUnreachable:!1,maintenanceMode:!1,maintenanceDetails:null,login:async()=>({message:"",isAuthenticated:!1}),logout:async()=>{},refreshUser:async()=>{},retryConnection:async()=>({message:"",isAuthenticated:!1}),navigateToRoleDashboard:()=>{},getRoleBasedRedirectUrl:()=>"/"}),d=()=>(0,n.useContext)(c);function o(e){let{children:s}=e,{user:a,isAuthenticated:d,isLoading:o,authChecked:m,serverUnreachable:u,maintenanceMode:x,maintenanceDetails:h,login:g,logout:p,fetchUser:v,retryConnection:j,getRoleBasedRedirectUrl:f}=(0,r.As)(),y=(0,l.useRouter)(),b=(0,n.useRef)(!0);(0,n.useEffect)(()=>()=>{b.current=!1},[]),(0,n.useEffect)(()=>{if(!b.current||!m)return;let e=window.location.pathname,s="/login"===e||e.startsWith("/auth/")||"/maintenance"===e||"/server-unreachable"===e;if(x&&"/maintenance"!==e)y.push("/maintenance");else if(u&&"/server-unreachable"!==e)y.push("/server-unreachable");else if(d||o||s){if(d&&(null==a?void 0:a.role)&&!s){let s=A(a.role);e.startsWith(s)||y.push(s)}}else y.push("/login")},[x,u,d,o,m,a,y]);let N=async()=>{if(b.current)try{await p(),b.current&&i.oR.success("Logged out successfully")}catch(e){b.current&&i.oR.error("Error during logout")}},w=async()=>{if(b.current&&d)try{await v()}catch(e){b.current&&i.oR.error("Error refreshing user data")}},A=e=>{switch(e.toLowerCase()){case"admin":return"/admin";case"supervisor":return"/supervisor";default:return"/sales"}},_=async()=>{try{return await j()}catch(e){return b.current&&i.oR.error("Failed to reconnect to server"),{message:"Connection failed",isAuthenticated:!1,serverError:!0}}};return(0,t.jsx)(c.Provider,{value:{user:a,isLoggedIn:d,loading:o,authChecked:m,serverUnreachable:u,maintenanceMode:x,maintenanceDetails:h,login:g,logout:N,refreshUser:w,retryConnection:_,navigateToRoleDashboard:()=>{if(b.current)if(null==a?void 0:a.role){let e=A(a.role);y.push(e)}else y.push("/login")},getRoleBasedRedirectUrl:A},children:s})}}},e=>{e.O(0,[6586,4277,8543,6373,4783,8787,3438,6489,6817,1778,8729,8441,5964,7358],()=>e(e.s=26582)),_N_E=e.O()}]);