(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{19324:()=>{},39432:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}},52596:(e,r,t)=>{"use strict";function n(){for(var e,r,t=0,n="",a=arguments.length;t<a;t++)(e=arguments[t])&&(r=function e(r){var t,n,a="";if("string"==typeof r||"number"==typeof r)a+=r;else if("object"==typeof r)if(Array.isArray(r)){var s=r.length;for(t=0;t<s;t++)r[t]&&(n=e(r[t]))&&(a&&(a+=" "),a+=n)}else for(n in r)r[n]&&(a&&(a+=" "),a+=n);return a}(e))&&(n&&(n+=" "),n+=r);return n}t.d(r,{$:()=>n,A:()=>a});let a=n},65688:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_188709",variable:"__variable_188709"}},93906:(e,r,t)=>{Promise.resolve().then(t.bind(t,97502)),Promise.resolve().then(t.t.bind(t,65688,23)),Promise.resolve().then(t.t.bind(t,39432,23)),Promise.resolve().then(t.t.bind(t,19324,23))},97502:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>u,Z:()=>c});var n=t(95155),a=t(61778),s=t(35695),o=t(12115),i=t(38543);let l=(0,o.createContext)({user:null,isLoggedIn:!1,loading:!0,authChecked:!1,serverUnreachable:!1,maintenanceMode:!1,maintenanceDetails:null,login:async()=>({message:"",isAuthenticated:!1}),logout:async()=>{},refreshUser:async()=>{},retryConnection:async()=>({message:"",isAuthenticated:!1}),navigateToRoleDashboard:()=>{},getRoleBasedRedirectUrl:()=>"/"}),c=()=>(0,o.useContext)(l);function u(e){let{children:r}=e,{user:t,isAuthenticated:c,isLoading:u,authChecked:h,serverUnreachable:f,maintenanceMode:d,maintenanceDetails:g,login:v,logout:m,fetchUser:y,retryConnection:b,getRoleBasedRedirectUrl:_}=(0,a.As)(),p=(0,s.useRouter)(),R=(0,o.useRef)(!0);(0,o.useEffect)(()=>()=>{R.current=!1},[]),(0,o.useEffect)(()=>{if(!R.current||!h)return;let e=window.location.pathname,r="/login"===e||e.startsWith("/auth/")||"/maintenance"===e||"/server-unreachable"===e;if(d&&"/maintenance"!==e)p.push("/maintenance");else if(f&&"/server-unreachable"!==e)p.push("/server-unreachable");else if(c||u||r){if(c&&(null==t?void 0:t.role)&&!r){let r=A(t.role);e.startsWith(r)||p.push(r)}}else p.push("/login")},[d,f,c,u,h,t,p]);let w=async()=>{if(R.current)try{await m(),R.current&&i.oR.success("Logged out successfully")}catch(e){R.current&&i.oR.error("Error during logout")}},C=async()=>{if(R.current&&c)try{await y()}catch(e){R.current&&i.oR.error("Error refreshing user data")}},A=e=>{switch(e.toLowerCase()){case"admin":return"/admin";case"supervisor":return"/supervisor";default:return"/sales"}},E=async()=>{try{return await b()}catch(e){return R.current&&i.oR.error("Failed to reconnect to server"),{message:"Connection failed",isAuthenticated:!1,serverError:!0}}};return(0,n.jsx)(l.Provider,{value:{user:t,isLoggedIn:c,loading:u,authChecked:h,serverUnreachable:f,maintenanceMode:d,maintenanceDetails:g,login:v,logout:w,refreshUser:C,retryConnection:E,navigateToRoleDashboard:()=>{if(R.current)if(null==t?void 0:t.role){let e=A(t.role);p.push(e)}else p.push("/login")},getRoleBasedRedirectUrl:A},children:r})}}},e=>{e.O(0,[4129,2533,6586,8543,1778,8441,5964,7358],()=>e(e.s=93906)),_N_E=e.O()}]);