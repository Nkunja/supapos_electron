(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3026],{8812:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eh});var a=t(95155),l=t(88145),r=t(97168),i=t(88482),n=t(95784),c=t(12115),d=t(60704),x=t(53999);function o(e){let{className:s,...t}=e;return(0,a.jsx)(d.bL,{"data-slot":"tabs",className:(0,x.cn)("flex flex-col gap-2",s),...t})}function m(e){let{className:s,...t}=e;return(0,a.jsx)(d.B8,{"data-slot":"tabs-list",className:(0,x.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function h(e){let{className:s,...t}=e;return(0,a.jsx)(d.l9,{"data-slot":"tabs-trigger",className:(0,x.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function j(e){let{className:s,...t}=e;return(0,a.jsx)(d.UC,{"data-slot":"tabs-content",className:(0,x.cn)("flex-1 outline-none",s),...t})}var p=t(35695),u=t(5540),g=t(53904),v=t(35169),N=t(69074),y=t(5937),f=t(23227),b=t(6874),_=t.n(b),w=t(38543);t(8102);var Z=t(61778);let A="".concat("https://supa.sirnkunja.co.ke/","api/shop-reports/"),k=async e=>{try{return(await Z.default.get("".concat(A).concat(e,"/overview/"))).data}catch(e){throw Error("Failed to fetch shop overview.")}},R=async e=>{try{return(await Z.default.get("".concat(A).concat(e,"/sales_analytics/"))).data}catch(e){throw Error("Failed to fetch sales analytics.")}},W=async e=>{try{return(await Z.default.get("".concat(A).concat(e,"/inventory_analytics/"))).data}catch(e){throw Error("Failed to fetch inventory analytics.")}},B=async e=>{try{return(await Z.default.get("".concat(A).concat(e,"/salesperson_analytics/"))).data}catch(e){throw Error("Failed to fetch salesperson analytics.")}},E=async e=>{try{return(await Z.default.get("".concat(A).concat(e,"/financial_summary/"))).data}catch(e){throw Error("Failed to fetch financial summary.")}},S=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{return(await Z.default.get("".concat(A).concat(e,"/product_performance/?days=").concat(s))).data}catch(e){throw Error("Failed to fetch product performance.")}},T=async e=>{try{return(await Z.default.get("".concat(A).concat(e,"/alerts_detail/"))).data}catch(e){throw Error("Failed to fetch alerts detail.")}},C=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;try{let[t,a,l,r,i,n,c]=await Promise.all([k(e),R(e),W(e),B(e),E(e),S(e,s),T(e)]);return{shop_id:e,overview:t,sales_analytics:a,inventory_analytics:l,salesperson_analytics:r,financial_summary:i,product_performance:n,alerts_detail:c,report_generated_at:new Date().toISOString()}}catch(e){throw Error("Failed to fetch complete shop report.")}};var P=t(1243),D=t(14186),F=t(85339),M=t(40646);function I(e){let{reportData:s,formatDate:t}=e,r=e=>{switch(e){case"critical":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-blue-600 bg-blue-50 border-blue-200"}},n=e=>{switch(e){case"expired":case"out_of_stock":return(0,a.jsx)(P.A,{className:"h-4 w-4"});case"expiry_warning":return(0,a.jsx)(D.A,{className:"h-4 w-4"});default:return(0,a.jsx)(F.A,{className:"h-4 w-4"})}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(P.A,{className:"h-4 w-4 text-red-600"}),"Critical"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:s.alerts_detail.summary.critical_alerts})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(F.A,{className:"h-4 w-4 text-orange-600"}),"High"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:s.alerts_detail.summary.high_alerts})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(D.A,{className:"h-4 w-4 text-yellow-600"}),"Medium"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:s.alerts_detail.summary.medium_alerts})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(M.A,{className:"h-4 w-4 text-blue-600"}),"Total"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.alerts_detail.summary.total_alerts})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Critical & High Priority Alerts"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[s.alerts_detail.alerts.filter(e=>"critical"===e.priority||"high"===e.priority).slice(0,10).map((e,s)=>(0,a.jsx)("div",{className:"p-3 rounded-lg border ".concat(r(e.priority)),children:(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[n(e.alert_type),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.product.name}),(0,a.jsx)(l.E,{variant:"outline",className:"text-xs ".concat("critical"===e.priority?"border-red-600 text-red-600":"border-orange-600 text-orange-600"),children:e.priority})]}),(0,a.jsx)("p",{className:"text-sm",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:["Units: ",e.inventory.units_available]}),e.inventory.expiry_date&&(0,a.jsxs)("span",{children:["Expires: ",t(e.inventory.expiry_date)]})]})]})})},s)),0===s.alerts_detail.alerts.filter(e=>"critical"===e.priority||"high"===e.priority).length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 py-4 text-center",children:"No critical or high priority alerts"})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Medium Priority Alerts"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[s.alerts_detail.alerts.filter(e=>"medium"===e.priority).slice(0,10).map((e,s)=>(0,a.jsx)("div",{className:"p-3 rounded-lg border ".concat(r(e.priority)),children:(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[n(e.alert_type),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.product.name}),(0,a.jsx)(l.E,{variant:"outline",className:"text-xs border-yellow-600 text-yellow-600",children:e.priority})]}),(0,a.jsx)("p",{className:"text-sm",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:["Units: ",e.inventory.units_available]}),e.inventory.expiry_date&&(0,a.jsxs)("span",{children:["Expires: ",t(e.inventory.expiry_date)]})]})]})})},s)),0===s.alerts_detail.alerts.filter(e=>"medium"===e.priority).length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 py-4 text-center",children:"No medium priority alerts"})]})})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"All Active Alerts"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[s.alerts_detail.alerts.map((e,s)=>(0,a.jsx)("div",{className:"p-3 rounded-lg border ".concat(r(e.priority)),children:(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[n(e.alert_type),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.product.name}),(0,a.jsx)(l.E,{variant:"outline",className:"text-xs ".concat("critical"===e.priority?"border-red-600 text-red-600":"high"===e.priority?"border-orange-600 text-orange-600":"medium"===e.priority?"border-yellow-600 text-yellow-600":"border-blue-600 text-blue-600"),children:e.priority}),(0,a.jsx)(l.E,{variant:"secondary",className:"text-xs",children:e.alert_type.replace("_"," ")})]}),(0,a.jsx)("p",{className:"text-sm",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:["Units: ",e.inventory.units_available]}),e.inventory.expiry_date&&(0,a.jsxs)("span",{children:["Expires: ",t(e.inventory.expiry_date)]}),e.inventory.batch_number&&(0,a.jsxs)("span",{children:["Batch: ",e.inventory.batch_number]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Created: ",t(e.created_at)]})]})})},s)),0===s.alerts_detail.alerts.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(M.A,{className:"h-12 w-12 mx-auto mb-4 text-green-600"}),(0,a.jsx)("p",{className:"text-lg font-medium text-green-600",children:"All Clear!"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No active alerts for this shop"})]})]})})]})]})}var L=t(72713),O=t(33109),H=t(68500),V=t(55868),z=t(17580),K=t(16785),U=t(46697),$=t(84355),q=t(32502),G=t(64065);function X(e){let{reportData:s,formatCurrency:t}=e,r="daily_trends"in s.financial_summary,n=s.financial_summary;if(!r)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"This Month"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:t(s.financial_summary.financial_periods.this_month.revenue)}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[s.financial_summary.financial_periods.this_month.transactions," transactions"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Avg: ",t(s.financial_summary.financial_periods.this_month.avg_transaction)]})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"This Week"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:t(s.financial_summary.financial_periods.this_week.revenue)}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[s.financial_summary.financial_periods.this_week.transactions," transactions"]})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Today"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:t(s.financial_summary.financial_periods.today.revenue)}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[s.financial_summary.financial_periods.today.transactions," transactions"]})]})})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Inventory Valuation"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Cost Value"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:t(s.financial_summary.inventory_valuation.total_cost_value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Selling Value"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:t(s.financial_summary.inventory_valuation.total_selling_value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Profit Margin"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-green-600",children:[s.financial_summary.inventory_valuation.potential_profit_margin.toFixed(1),"%"]})]})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Payment Methods Breakdown"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[s.financial_summary.payment_methods.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-b-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm capitalize",children:e.payment_method}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[e.count," transactions"]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("p",{className:"font-medium text-sm",children:t(e.total_amount)})})]},s)),0===s.financial_summary.payment_methods.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 py-4 text-center",children:"No payment data available"})]})})]}),(0,a.jsx)(i.Zp,{className:"border-dashed border-2 border-blue-300 bg-blue-50",children:(0,a.jsxs)(i.Wu,{className:"p-6 text-center",children:[(0,a.jsx)(L.A,{className:"h-12 w-12 mx-auto mb-4 text-blue-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Enhanced Analytics Available"}),(0,a.jsx)("p",{className:"text-sm text-blue-600",children:"Upgrade to enhanced financial reporting to see charts, trends, and advanced KPIs."})]})})]});let c=e=>"".concat(e>=0?"+":"").concat(e.toFixed(1),"%"),d=e=>new Intl.NumberFormat("en-KE").format(e),x={labels:n.daily_trends.map(e=>e.day_name),datasets:[{label:"Revenue",data:n.daily_trends.map(e=>e.revenue),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1,fill:!0}]},p={labels:n.monthly_trends.map(e=>e.month_short),datasets:[{label:"Monthly Revenue",data:n.monthly_trends.map(e=>e.revenue),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1}]},u={labels:n.payment_methods.map(e=>e.payment_method.toUpperCase()),datasets:[{data:n.payment_methods.map(e=>e.total_amount),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)"],borderWidth:2}]};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Monthly Growth"}),n.growth_metrics.monthly_growth_rate>=0?(0,a.jsx)(O.A,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(H.A,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(n.growth_metrics.monthly_growth_rate>=0?"text-green-600":"text-red-600"),children:c(n.growth_metrics.monthly_growth_rate)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"vs last month"})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Avg Daily Revenue"}),(0,a.jsx)(V.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:t(n.kpis.avg_daily_revenue)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"this month"})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Customers"}),(0,a.jsx)(z.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:d(n.kpis.total_customers_this_month)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"this month"})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Profit Margin"}),(0,a.jsx)(K.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[n.growth_metrics.profit_margin_estimate.toFixed(1),"%"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"estimated"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(N.A,{className:"h-5 w-5"}),"This Month"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:t(n.financial_periods.this_month.revenue)}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[d(n.financial_periods.this_month.transactions)," transactions"]})]}),(0,a.jsxs)("div",{className:"pt-2 border-t",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Avg Transaction"}),(0,a.jsx)("span",{className:"font-medium",children:t(n.financial_periods.this_month.avg_transaction)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Discounts"}),(0,a.jsxs)("span",{className:"text-red-600",children:["-",t(n.financial_periods.this_month.discounts_given)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Tax Collected"}),(0,a.jsx)("span",{className:"text-green-600",children:t(n.financial_periods.this_month.tax_collected)})]})]}),(0,a.jsxs)(l.E,{variant:n.growth_metrics.monthly_growth_rate>=0?"default":"destructive",className:"w-full justify-center",children:[c(n.growth_metrics.monthly_growth_rate)," vs last month"]})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"This Week"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:t(n.financial_periods.this_week.revenue)}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[d(n.financial_periods.this_week.transactions)," transactions"]})]}),(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Avg Transaction"}),(0,a.jsx)("span",{className:"font-medium",children:t(n.financial_periods.this_week.avg_transaction)})]})}),(0,a.jsxs)(l.E,{variant:n.growth_metrics.weekly_growth_rate>=0?"default":"destructive",className:"w-full justify-center",children:[c(n.growth_metrics.weekly_growth_rate)," vs last week"]})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Today"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:t(n.financial_periods.today.revenue)}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[d(n.financial_periods.today.transactions)," transactions"]})]}),(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Avg Transaction"}),(0,a.jsx)("span",{className:"font-medium",children:t(n.financial_periods.today.avg_transaction)})]})})]})})]})]}),(0,a.jsxs)(o,{defaultValue:"daily",className:"space-y-4",children:[(0,a.jsxs)(m,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(h,{value:"daily",children:"Daily Trends"}),(0,a.jsx)(h,{value:"monthly",children:"Monthly Analysis"}),(0,a.jsx)(h,{value:"payments",children:"Payment Methods"})]}),(0,a.jsxs)(j,{value:"daily",className:"space-y-4",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(U.A,{className:"h-5 w-5"}),"Daily Revenue Trends (Last 7 Days)"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(G.N1,{data:x,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return t(Number(e))}}}},interaction:{intersect:!1,mode:"index"}}})})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.daily_trends.map((e,s)=>(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"pb-3",children:[(0,a.jsx)(i.ZB,{className:"text-base",children:e.day_name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.date).toLocaleDateString()})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Revenue"}),(0,a.jsx)("span",{className:"font-bold",children:t(e.revenue)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Transactions"}),(0,a.jsx)("span",{children:e.transactions})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Avg Transaction"}),(0,a.jsx)("span",{children:t(e.avg_transaction)})]})]})})]},s))})]}),(0,a.jsxs)(j,{value:"monthly",className:"space-y-4",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(L.A,{className:"h-5 w-5"}),"Monthly Revenue Trends (Last 12 Months)"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(G.yP,{data:p,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return t(Number(e))}}}}}})})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.monthly_trends.slice(-6).map((e,s)=>(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsx)(i.ZB,{className:"text-base",children:e.month_short})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t(e.revenue)}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[d(e.transactions)," transactions"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Avg: ",t(e.avg_transaction)]})]})})]},s))})]}),(0,a.jsx)(j,{value:"payments",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)($.A,{className:"h-5 w-5"}),"Payment Methods Distribution"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"h-80 flex items-center justify-center",children:(0,a.jsx)(G.nu,{data:u,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:function(e){let s=e.label||"",a=t(Number(e.parsed)),l=e.dataset.data.reduce((e,s)=>e+s,0),r=(Number(e.parsed)/l*100).toFixed(1);return"".concat(s,": ").concat(a," (").concat(r,"%)")}}}}}})})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Payment Methods Breakdown"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:n.payment_methods.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm capitalize",children:e.payment_method}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[d(e.count)," transactions"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-bold text-lg",children:t(e.total_amount)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(e.total_amount/n.payment_methods.reduce((e,s)=>e+s.total_amount,0)*100).toFixed(1),"%"]})]})]},s))})})]})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Inventory & Profit Analysis"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Inventory Cost"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:t(n.inventory_valuation.total_cost_value)})]}),(0,a.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Inventory Value"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:t(n.inventory_valuation.total_selling_value)})]}),(0,a.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Potential Profit"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:t(n.inventory_valuation.total_selling_value-n.inventory_valuation.total_cost_value)})]}),(0,a.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Profit Margin"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[n.inventory_valuation.potential_profit_margin.toFixed(1),"%"]})]})]})})]}),n.kpis.best_day_this_month&&(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(K.A,{className:"h-5 w-5"}),"Performance Insights"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Best Day This Month"}),(0,a.jsx)("p",{className:"text-lg font-bold text-blue-600",children:new Date(n.kpis.best_day_this_month.created_at__date).toLocaleDateString()}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t(n.kpis.best_day_this_month.daily_revenue)})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Estimated Monthly Profit"}),(0,a.jsx)("p",{className:"text-lg font-bold text-green-600",children:t(n.growth_metrics.estimated_monthly_profit)}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[n.growth_metrics.profit_margin_estimate.toFixed(1),"% margin"]})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Monthly Growth"}),(0,a.jsx)("p",{className:"text-lg font-bold ".concat(n.growth_metrics.monthly_growth_rate>=0?"text-green-600":"text-red-600"),children:c(n.growth_metrics.monthly_growth_rate)}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"vs last month"})]})]})})]})]})}q.t1.register(q.PP,q.kc,q.E8,q.No,q.FN,q.Bs,q.hE,q.m_,q.s$);var Y=t(54861);function J(e){let{reportData:s,formatDate:t}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(M.A,{className:"h-4 w-4 text-green-600"}),"Healthy Stock"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.inventory_analytics.stock_analysis.healthy_stock.length})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(F.A,{className:"h-4 w-4 text-yellow-600"}),"Low Stock"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:s.inventory_analytics.stock_analysis.low_stock.length})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(Y.A,{className:"h-4 w-4 text-red-600"}),"Out of Stock"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:s.inventory_analytics.stock_analysis.out_of_stock.length})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(D.A,{className:"h-4 w-4 text-orange-600"}),"Near Expiry"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:s.inventory_analytics.stock_analysis.near_expiry.length})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{className:"text-lg",children:"Low Stock Items"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[s.inventory_analytics.stock_analysis.low_stock.slice(0,10).map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-b-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.product_name}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[e.units_available," units left"]})]}),(0,a.jsx)(l.E,{variant:"outline",className:"text-yellow-600",children:"Low"})]},s)),0===s.inventory_analytics.stock_analysis.low_stock.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 py-4 text-center",children:"No low stock items"})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{className:"text-lg",children:"Expired Items"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[s.inventory_analytics.stock_analysis.expired.slice(0,10).map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-b-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.product_name}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Expired: ",e.expiry_date?t(e.expiry_date):"N/A"]})]}),(0,a.jsx)(l.E,{variant:"outline",className:"text-red-600",children:"Expired"})]},s)),0===s.inventory_analytics.stock_analysis.expired.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 py-4 text-center",children:"No expired items"})]})})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{className:"text-lg",children:"Near Expiry Items"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[s.inventory_analytics.stock_analysis.near_expiry.slice(0,10).map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-b-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.product_name}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Expires in ",e.days_to_expiry," days (",e.expiry_date?t(e.expiry_date):"N/A",")"]})]}),(0,a.jsxs)(l.E,{variant:"outline",className:"text-orange-600",children:[e.days_to_expiry,"d left"]})]},s)),0===s.inventory_analytics.stock_analysis.near_expiry.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 py-4 text-center",children:"No items near expiry"})]})})]})]})}var Q=t(55863);function ee(e){let{className:s,value:t,...l}=e;return(0,a.jsx)(Q.bL,{"data-slot":"progress",className:(0,x.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...l,children:(0,a.jsx)(Q.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})}var es=t(27809),et=t(79397),ea=t(37108),el=t(74131),er=t(71539),ei=t(94870);function en(e){let{reportData:s,formatCurrency:t}=e,r=s.overview.inventory.healthy_stock_items/s.overview.inventory.total_products*100,n=s.overview.inventory.low_stock_items/s.overview.inventory.total_products*100,c=s.overview.inventory.out_of_stock_items/s.overview.inventory.total_products*100,d=s.overview.inventory.expired_items/s.overview.inventory.total_products*100,x=s.overview.shop.active_salespersons_count/s.overview.shop.salespersons_count*100,o=(s.overview.inventory.total_stock_value-s.overview.inventory.total_cost_value)/s.overview.inventory.total_stock_value*100,m=e=>new Intl.NumberFormat("en-KE").format(e),h=(()=>{let e=s.overview.alerts.unresolved_alerts;return 0===e?{color:"text-green-600",bg:"bg-green-50",status:"All Clear"}:e<=5?{color:"text-yellow-600",bg:"bg-yellow-50",status:"Attention"}:e<=10?{color:"text-orange-600",bg:"bg-orange-50",status:"Warning"}:{color:"text-red-600",bg:"bg-red-50",status:"Critical"}})();return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(i.Zp,{className:"relative overflow-hidden border-0 shadow-lg bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium text-blue-100",children:"Today's Revenue"}),(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:(0,a.jsx)(V.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold mb-1",children:t(s.overview.sales.today.sales)}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-blue-100",children:[(0,a.jsx)(es.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{className:"text-xs",children:[m(s.overview.sales.today.transactions)," transactions"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-2 text-xs text-blue-100",children:[(0,a.jsx)(et.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[s.overview.sales.today.items_sold," items sold"]})]})]})]}),(0,a.jsxs)(i.Zp,{className:"relative overflow-hidden border-0 shadow-lg bg-gradient-to-br from-emerald-500 to-emerald-600 text-white",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium text-emerald-100",children:"Inventory Worth"}),(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:(0,a.jsx)(ea.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold mb-1",children:t(s.overview.inventory.total_stock_value)}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-emerald-100",children:[(0,a.jsx)(el.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{className:"text-xs",children:[m(s.overview.inventory.total_products)," products in stock"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-2 text-xs text-emerald-100",children:[(0,a.jsx)(K.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[o.toFixed(1),"% profit margin"]})]})]})]}),(0,a.jsxs)(i.Zp,{className:"relative overflow-hidden border-0 shadow-lg bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium text-purple-100",children:"Team Status"}),(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:(0,a.jsx)(z.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsxs)("div",{className:"text-3xl font-bold mb-1",children:[s.overview.shop.active_salespersons_count,(0,a.jsxs)("span",{className:"text-lg font-normal text-purple-200",children:["/",s.overview.shop.salespersons_count]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-purple-100",children:[(0,a.jsx)(et.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{className:"text-xs",children:[x.toFixed(0),"% staff active"]})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(ee,{value:x,className:"h-1.5 bg-white/20"})})]})]}),(0,a.jsxs)(i.Zp,{className:"relative overflow-hidden border-0 shadow-lg ".concat(h.bg),children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium text-gray-700",children:"System Alerts"}),(0,a.jsx)("div",{className:"p-2 ".concat(h.color," bg-white/80 rounded-lg"),children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold mb-1 ".concat(h.color),children:s.overview.alerts.unresolved_alerts}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(er.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"text-xs",children:h.status})]}),(0,a.jsx)(l.E,{variant:0===s.overview.alerts.unresolved_alerts?"default":"destructive",className:"mt-2 text-xs",children:0===s.overview.alerts.unresolved_alerts?"No Issues":"Needs Attention"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(i.Zp,{className:"col-span-1 lg:col-span-1",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-5 w-5 text-blue-600"}),"Sales Progression"]})}),(0,a.jsx)(i.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full bg-blue-100",children:(0,a.jsx)(N.A,{className:"h-4 w-4 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:"Today"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Current performance"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-bold text-blue-600",children:t(s.overview.sales.today.sales)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[s.overview.sales.today.transactions," txns"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full bg-green-100",children:(0,a.jsx)(N.A,{className:"h-4 w-4 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:"This Week"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"7-day performance"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-bold text-green-600",children:t(s.overview.sales.this_week.sales)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[s.overview.sales.this_week.transactions," txns"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full bg-purple-100",children:(0,a.jsx)(N.A,{className:"h-4 w-4 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:"This Month"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Monthly target"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-bold text-purple-600",children:t(s.overview.sales.this_month.sales)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[s.overview.sales.this_month.transactions," txns"]})]})]})]})})]}),(0,a.jsxs)(i.Zp,{className:"col-span-1 lg:col-span-2",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(el.A,{className:"h-5 w-5 text-emerald-600"}),"Inventory Health Monitor"]})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 rounded-lg bg-green-50 border border-green-200",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-2 rounded-full bg-green-100",children:(0,a.jsx)(M.A,{className:"h-6 w-6 text-green-600"})}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-700",children:s.overview.inventory.healthy_stock_items}),(0,a.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"Healthy Stock"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(ee,{value:r,className:"h-1.5"}),(0,a.jsxs)("p",{className:"text-xs text-green-500 mt-1",children:[r.toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{className:"text-center p-4 rounded-lg bg-yellow-50 border border-yellow-200",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-2 rounded-full bg-yellow-100",children:(0,a.jsx)(P.A,{className:"h-6 w-6 text-yellow-600"})}),(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-700",children:s.overview.inventory.low_stock_items}),(0,a.jsx)("p",{className:"text-xs text-yellow-600 font-medium",children:"Low Stock"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(ee,{value:n,className:"h-1.5"}),(0,a.jsxs)("p",{className:"text-xs text-yellow-500 mt-1",children:[n.toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{className:"text-center p-4 rounded-lg bg-red-50 border border-red-200",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-2 rounded-full bg-red-100",children:(0,a.jsx)(Y.A,{className:"h-6 w-6 text-red-600"})}),(0,a.jsx)("div",{className:"text-2xl font-bold text-red-700",children:s.overview.inventory.out_of_stock_items}),(0,a.jsx)("p",{className:"text-xs text-red-600 font-medium",children:"Out of Stock"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(ee,{value:c,className:"h-1.5"}),(0,a.jsxs)("p",{className:"text-xs text-red-500 mt-1",children:[c.toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{className:"text-center p-4 rounded-lg bg-gray-50 border border-gray-200",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-2 rounded-full bg-gray-100",children:(0,a.jsx)(D.A,{className:"h-6 w-6 text-gray-600"})}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-700",children:s.overview.inventory.expired_items}),(0,a.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Expired"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(ee,{value:d,className:"h-1.5"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[d.toFixed(1),"%"]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-700",children:"Inventory Overview"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[m(s.overview.inventory.total_products)," total products"]})]}),(0,a.jsxs)("div",{className:"flex rounded-lg overflow-hidden h-3",children:[(0,a.jsx)("div",{className:"bg-green-500",style:{width:"".concat(r,"%")},title:"Healthy: ".concat(r.toFixed(1),"%")}),(0,a.jsx)("div",{className:"bg-yellow-500",style:{width:"".concat(n,"%")},title:"Low Stock: ".concat(n.toFixed(1),"%")}),(0,a.jsx)("div",{className:"bg-red-500",style:{width:"".concat(c,"%")},title:"Out of Stock: ".concat(c.toFixed(1),"%")}),(0,a.jsx)("div",{className:"bg-gray-500",style:{width:"".concat(d,"%")},title:"Expired: ".concat(d.toFixed(1),"%")})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)(i.Zp,{className:"border border-blue-200 bg-blue-50",children:(0,a.jsx)(i.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full bg-blue-100",children:(0,a.jsx)(ei.A,{className:"h-4 w-4 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Profit Potential"}),(0,a.jsxs)("p",{className:"text-xs text-blue-600",children:[t(s.overview.inventory.potential_profit)," available"]})]})]})})}),(0,a.jsx)(i.Zp,{className:"border border-green-200 bg-green-50",children:(0,a.jsx)(i.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full bg-green-100",children:(0,a.jsx)(z.A,{className:"h-4 w-4 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Team Efficiency"}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:[x.toFixed(0),"% staff utilization rate"]})]})]})})}),(0,a.jsx)(i.Zp,{className:"border border-purple-200 bg-purple-50",children:(0,a.jsx)(i.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full bg-purple-100",children:(0,a.jsx)(K.A,{className:"h-4 w-4 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-purple-800",children:"Stock Health"}),(0,a.jsxs)("p",{className:"text-xs text-purple-600",children:[r.toFixed(0),"% products in good condition"]})]})]})})})]})]})}function ec(e){let{reportData:s,formatCurrency:t,days:r}=e;return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{children:["Top Selling Products (",r," days)"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[s.product_performance.top_selling_products.slice(0,8).map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.inventory__product__name}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[e.quantity_sold," units"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:t(e.revenue)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.transactions," orders"]})]})]},s)),0===s.product_performance.top_selling_products.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 py-4 text-center",children:"No sales data available"})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Slow Moving Products"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[s.product_performance.slow_moving_products.slice(0,8).map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-b-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.category__name})]}),(0,a.jsx)(l.E,{variant:"outline",className:"text-orange-600",children:"No Sales"})]},s)),0===s.product_performance.slow_moving_products.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 py-4 text-center",children:"All products have recent sales"})]})})]})]})})}var ed=t(66932),ex=t(71007);function eo(e){let{reportData:s,formatCurrency:t,formatDate:l}=e,[n,d]=(0,c.useState)(7),x=s.sales_analytics.daily_sales.slice(-n).sort((e,s)=>new Date(e.date).getTime()-new Date(s.date).getTime()),o={labels:x.map(e=>l(e.date)),datasets:[{label:"Revenue",data:x.map(e=>e.sales),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1,yAxisID:"y"},{label:"Transactions",data:x.map(e=>e.transactions),backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"rgb(16, 185, 129)",borderWidth:1,yAxisID:"y1"}]};x.map(e=>l(e.date)),x.map(e=>e.sales);let m=x.reduce((e,s)=>e+s.sales,0),h=x.reduce((e,s)=>e+s.transactions,0),j=m/x.length,p=x.reduce((e,s)=>s.sales>e.sales?s:e,x[0]),u=x.reduce((e,s)=>s.sales<e.sales?s:e,x[0]),g=e=>new Intl.NumberFormat("en-KE").format(e);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Total Revenue"})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t(m)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Last ",n," days"]})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Total Transactions"})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:g(h)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Last ",n," days"]})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Avg Daily Revenue"})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:t(j)}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Per day average"})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Avg Transaction"})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:t(m/h)}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Per transaction"})]})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(L.A,{className:"h-5 w-5"}),"Sales Analytics"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ed.A,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("div",{className:"flex gap-2",children:[7,14,21,30].map(e=>(0,a.jsxs)(r.$,{variant:n===e?"default":"outline",size:"sm",onClick:()=>d(e),children:[e,"d"]},e))})]})]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(G.yP,{data:o,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1},tooltip:{callbacks:{label:function(e){let s=e.dataset.label||"",a="Revenue"===e.dataset.label?t(Number(e.parsed.y)):e.parsed.y;return"".concat(s,": ").concat(a)}}}},scales:{y:{beginAtZero:!0,position:"left",ticks:{callback:function(e){return t(Number(e))}}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,grid:{drawOnChartArea:!1},ticks:{callback:function(e){return"".concat(e," txns")}}}},interaction:{intersect:!1,mode:"index"}}})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-5 w-5"}),"Performance Highlights"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Best Day"}),(0,a.jsx)("p",{className:"text-xs text-green-600",children:l(p.date)})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-lg font-bold text-green-700",children:t(p.sales)}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:[p.transactions," transactions"]})]})]})}),(0,a.jsx)("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Lowest Day"}),(0,a.jsx)("p",{className:"text-xs text-red-600",children:l(u.date)})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-lg font-bold text-red-700",children:t(u.sales)}),(0,a.jsxs)("p",{className:"text-xs text-red-600",children:[u.transactions," transactions"]})]})]})}),(0,a.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Growth Potential"}),(0,a.jsx)("p",{className:"text-xs text-blue-600",children:"If every day was your best day"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-lg font-bold text-blue-700",children:t(p.sales*n)}),(0,a.jsxs)("p",{className:"text-xs text-blue-600",children:["+",t(p.sales*n-m)," potential"]})]})]})})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Top Selling Products"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:s.sales_analytics.top_products.slice(0,6).map((e,l)=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-b-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-xs font-bold text-blue-600",children:l+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.product_name}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[e.quantity_sold," units sold"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:t(e.revenue)}),(0,a.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-1.5 mt-1",children:(0,a.jsx)("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:"".concat(e.revenue/Math.max(...s.sales_analytics.top_products.map(e=>e.revenue))*100,"%")}})})]})]},l))})})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(ex.A,{className:"h-5 w-5"}),"Salesperson Performance"]})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.sales_analytics.salesperson_performance.map((e,l)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(ex.A,{className:"h-4 w-4 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-medium text-sm",children:[e.created_by__first_name," ",e.created_by__last_name]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.created_by__email})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Total Sales"}),(0,a.jsx)("span",{className:"font-bold text-blue-600",children:t(e.total_sales)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Transactions"}),(0,a.jsx)("span",{className:"font-medium",children:g(e.transactions)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Avg Transaction"}),(0,a.jsx)("span",{className:"font-medium",children:t(e.avg_transaction)})]}),(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,a.jsx)("span",{children:"Performance"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-12 bg-gray-200 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:"".concat(Math.min(100,e.total_sales/Math.max(...s.sales_analytics.salesperson_performance.map(e=>e.total_sales))*100),"%")}})}),(0,a.jsxs)("span",{className:"text-green-600 font-medium",children:[Math.round(e.total_sales/Math.max(...s.sales_analytics.salesperson_performance.map(e=>e.total_sales))*100),"%"]})]})]})})]})]},l))})})]})]})}function em(e){let{reportData:s,formatCurrency:t,formatDate:r}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:s.salesperson_analytics.salesperson_analytics.map((e,s)=>(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(ex.A,{className:"h-4 w-4"}),e.salesperson.first_name,e.salesperson.is_active?(0,a.jsx)(l.E,{variant:"default",className:"text-xs",children:"Active"}):(0,a.jsx)(l.E,{variant:"secondary",className:"text-xs",children:"Inactive"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[e.salesperson.email,", ",e.salesperson.first_name+" "+e.salesperson.last_name]})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Performance"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Today"}),(0,a.jsx)("span",{className:"font-medium",children:t(e.performance.today.sales)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{}),(0,a.jsxs)("span",{children:[e.performance.today.transactions," transactions"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"This Week"}),(0,a.jsx)("span",{className:"font-medium",children:t(e.performance.this_week.sales)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{}),(0,a.jsxs)("span",{children:[e.performance.this_week.transactions," transactions"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"This Month"}),(0,a.jsx)("span",{className:"font-medium",children:t(e.performance.this_month.sales)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{}),(0,a.jsxs)("span",{children:[e.performance.this_month.transactions," transactions"]})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-1 border-t",children:[(0,a.jsx)("span",{children:"Avg/Transaction"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:t(e.performance.this_month.avg_transaction)})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Recent Activity"}),(0,a.jsx)("div",{className:"space-y-1",children:e.recent_activity.length>0?e.recent_activity.slice(0,3).map((e,s)=>(0,a.jsxs)("div",{className:"text-xs border-b pb-1 last:border-b-0",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:e.invoice_number}),(0,a.jsx)("span",{children:t(e.total_amount)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-gray-500",children:[(0,a.jsx)("span",{children:e.customer_name||"Walk-in customer"}),(0,a.jsx)("span",{children:r(e.created_at)})]})]},s)):(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"No recent activity"})})]})]})})]},s))}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Team Summary"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:s.salesperson_analytics.salesperson_analytics.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Staff"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:s.salesperson_analytics.salesperson_analytics.filter(e=>e.salesperson.is_active).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Active Staff"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:t(s.salesperson_analytics.salesperson_analytics.reduce((e,s)=>e+s.performance.this_month.sales,0))}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Monthly Sales"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:s.salesperson_analytics.salesperson_analytics.reduce((e,s)=>e+s.performance.this_month.transactions,0)}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Transactions"})]})]})})]})]})}function eh(){let e=(0,p.useRouter)(),s=(0,p.useParams)().id,[t,d]=(0,c.useState)([]),[x,b]=(0,c.useState)(null),[Z,A]=(0,c.useState)(null),[k,R]=(0,c.useState)(!0),[W,B]=(0,c.useState)(!1),[E,S]=(0,c.useState)(30);(0,c.useEffect)(()=>{T()},[]),(0,c.useEffect)(()=>{s&&!isNaN(Number(s))?b(Number(s)):t.length>0&&!x&&b(t[0].id)},[s,t]),(0,c.useEffect)(()=>{x&&P(x)},[x,E]);let T=async()=>{try{R(!0);let e=await (0,u.KM)();Array.isArray(e)?d(e.filter(e=>e.is_active)):e.results&&d(e.results.filter(e=>e.is_active))}catch(e){w.oR.error("Failed to fetch shops"),d([])}finally{R(!1)}},P=async e=>{try{B(!0);let s=await C(e,E);A(s)}catch(e){w.oR.error("Failed to fetch shop report"),A(null)}finally{B(!1)}},D=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(e),F=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),M=t.find(e=>e.id===x);return k?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(g.A,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading shops..."})]})}):(0,a.jsxs)("div",{className:"container mx-auto p-4 max-w-7xl",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(_(),{href:"/admin/shops",children:(0,a.jsxs)(r.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Back to Shops"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:"Shop Analytics"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Comprehensive performance and inventory reports"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(n.l6,{value:E.toString(),onValueChange:e=>S(Number(e)),children:[(0,a.jsxs)(n.bq,{className:"w-32",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)(n.yv,{})]}),(0,a.jsxs)(n.gC,{children:[(0,a.jsx)(n.eb,{value:"7",children:"7 Days"}),(0,a.jsx)(n.eb,{value:"30",children:"30 Days"}),(0,a.jsx)(n.eb,{value:"90",children:"90 Days"}),(0,a.jsx)(n.eb,{value:"365",children:"1 Year"})]})]}),(0,a.jsxs)(n.l6,{value:(null==x?void 0:x.toString())||"",onValueChange:s=>{let t=Number(s);b(t),e.push("/admin/shops/".concat(t))},children:[(0,a.jsxs)(n.bq,{className:"w-64",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)(n.yv,{placeholder:"Select shop"})]}),(0,a.jsx)(n.gC,{children:t.map(e=>(0,a.jsx)(n.eb,{value:e.id.toString(),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)(l.E,{variant:"outline",className:"text-xs",children:[e.salespersons_count," staff"]})]})},e.id))})]}),(0,a.jsxs)(r.$,{onClick:()=>x&&P(x),disabled:W,variant:"outline",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2 ".concat(W?"animate-spin":"")}),"Refresh"]})]})]}),M&&(0,a.jsx)(i.Zp,{className:"mb-6",children:(0,a.jsx)(i.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:M.name}),(0,a.jsx)(l.E,{variant:M.is_active?"default":"secondary",children:M.is_active?"Active":"Inactive"})]})}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("p",{children:M.address}),(0,a.jsx)("p",{children:M.phone_number})]})]})})}),W?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(g.A,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading shop analytics..."})]})}):Z?(0,a.jsxs)(o,{defaultValue:"overview",className:"space-y-6",children:[(0,a.jsxs)(m,{className:"grid w-full grid-cols-4 lg:grid-cols-7",children:[(0,a.jsx)(h,{value:"overview",children:"Overview"}),(0,a.jsx)(h,{value:"sales",children:"Sales"}),(0,a.jsx)(h,{value:"inventory",children:"Inventory"}),(0,a.jsx)(h,{value:"financial",children:"Financial"}),(0,a.jsx)(h,{value:"products",children:"Products"}),(0,a.jsx)(h,{value:"staff",children:"Staff"}),(0,a.jsx)(h,{value:"alerts",children:"Alerts"})]}),(0,a.jsx)(j,{value:"overview",children:(0,a.jsx)(en,{reportData:Z,formatCurrency:D})}),(0,a.jsx)(j,{value:"sales",children:(0,a.jsx)(eo,{reportData:Z,formatCurrency:D,formatDate:F})}),(0,a.jsx)(j,{value:"inventory",children:(0,a.jsx)(J,{reportData:Z,formatDate:F})}),(0,a.jsx)(j,{value:"financial",children:(0,a.jsx)(X,{reportData:Z,formatCurrency:D})}),(0,a.jsx)(j,{value:"products",children:(0,a.jsx)(ec,{reportData:Z,formatCurrency:D,days:E})}),(0,a.jsx)(j,{value:"staff",children:(0,a.jsx)(em,{reportData:Z,formatCurrency:D,formatDate:F})}),(0,a.jsx)(j,{value:"alerts",children:(0,a.jsx)(I,{reportData:Z,formatDate:F})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(f.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Select a shop to view analytics"})]})})]})}q.t1.register(q.PP,q.kc,q.E8,q.hE,q.m_,q.s$)},78744:(e,s,t)=>{Promise.resolve().then(t.bind(t,8812))}},e=>{e.O(0,[5647,6586,4277,8543,6373,4783,8787,3438,6874,1634,1778,8729,8441,5964,7358],()=>e(e.s=78744)),_N_E=e.O()}]);