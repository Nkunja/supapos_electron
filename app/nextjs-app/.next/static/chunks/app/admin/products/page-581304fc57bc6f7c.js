(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7575],{14805:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(95155),n=s(12115),r=s(38543),c=s(54312),l=s(97168),i=s(53904),o=s(84616);function d(e){let{totalProducts:t,loading:s,onRefresh:n,onAddProduct:r}=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Products Catalog"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[t," total products"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(l.$,{variant:"outline",onClick:n,disabled:s,className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"w-4 h-4 ".concat(s?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)(l.$,{onClick:r,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),"Add Product"]})]})]})}var x=s(88482),m=s(37108);function h(e){let{totalProducts:t}=e;return(0,a.jsx)(x.Zp,{children:(0,a.jsx)(x.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Products"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t})]}),(0,a.jsx)(m.A,{className:"w-8 h-8 text-blue-600"})]})})})}var u=s(89852),p=s(47924),g=s(57434),j=s(23837);function f(e){let{searchQuery:t,onSearch:s,onExportCSV:n,onExportPDF:r}=e;return(0,a.jsx)(x.Zp,{className:"mb-6",children:(0,a.jsx)(x.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(u.p,{placeholder:"Search by name, generic name, or description...",value:t,onChange:e=>s(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.$,{variant:"outline",onClick:n,className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),"CSV"]}),(0,a.jsxs)(l.$,{variant:"outline",onClick:r,className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)(j.A,{className:"w-4 h-4"}),"PDF"]})]})]})})})}var N=s(51154),y=s(13717),b=s(62525);function v(e){let{products:t,loading:s,searchQuery:n,onAddProduct:r,onEditProduct:c,onDeleteProduct:i}=e;return(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5"}),"Products Catalog"]})}),(0,a.jsx)(x.Wu,{children:s?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(N.A,{className:"w-8 h-8 animate-spin text-blue-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading products..."})]}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(m.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:n?"Try adjusting your search":"Get started by adding your first product"}),!n&&(0,a.jsxs)(l.$,{onClick:r,children:[(0,a.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Add Product"]})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Product Details"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Description"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"py-4 px-4",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.generic_name})]}),(0,a.jsx)("td",{className:"py-4 px-4 text-sm text-gray-600",children:e.description||"N/A"}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>c(e),className:"h-8 w-8 p-0",title:"Edit product",children:(0,a.jsx)(y.A,{className:"w-4 h-4"})}),(0,a.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>i(e.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete product",children:(0,a.jsx)(b.A,{className:"w-4 h-4"})})]})})]},e.id))})]})})})]})}var w=s(42355),P=s(13052);function A(e){let{currentPage:t,totalCount:s,hasPrevious:n,hasNext:r,onPageChange:c}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-6 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(t-1)*10+1," to"," ",Math.min(10*t,s)," of ",s," results"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>c(t-1),disabled:!n,className:"flex items-center gap-1",children:[(0,a.jsx)(w.A,{className:"w-4 h-4"}),"Previous"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 px-3",children:["Page ",t]}),(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>c(t+1),disabled:!r,className:"flex items-center gap-1",children:["Next",(0,a.jsx)(P.A,{className:"w-4 h-4"})]})]})]})}var C=s(16206);function S(){let[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)(!0),[i,o]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),[u,p]=(0,n.useState)({search:"",page:1}),[g,j]=(0,n.useState)({count:0,next:null,previous:null}),N=function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"contains",r=function(e,t){let[s,a]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let t=setTimeout(()=>{a(e)},300);return()=>clearTimeout(t)},[e,300]),s}(t,300);return(0,n.useMemo)(()=>{if(!r)return e;let t=r.trim().toLowerCase();return e.filter(e=>s.some(s=>{let n=e[s];if(!n)return!1;let r=String(n).toLowerCase();switch(a){case"contains":return r.includes(t);case"startsWith":return r.startsWith(t);case"exact":return r===t;default:return!1}}))},[e,r,s,a])}(e,u.search,["name","generic_name","description"],"contains");(0,n.useEffect)(()=>{y()},[u.page]);let y=async()=>{l(!0);try{let e={page:u.page>1?u.page.toString():void 0},s=await (0,c.d$)(e);t(s.results||[]),j({count:s.count||0,next:s.next,previous:s.previous})}catch(e){r.oR.error("Failed to load products"),t([])}finally{l(!1)}},b=()=>{m(null),o(!0)},w=async e=>{if(confirm("Are you sure you want to delete this product?"))try{await (0,c.DD)(e),r.oR.success("Product deleted successfully!"),y()}catch(e){r.oR.error("Failed to delete product")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(d,{totalProducts:g.count,loading:s,onRefresh:y,onAddProduct:b}),(0,a.jsx)(h,{totalProducts:N.length})]}),(0,a.jsx)(f,{searchQuery:u.search,onSearch:e=>{p(t=>({...t,search:e,page:1}))},onExportCSV:()=>{try{let e=N.map(e=>[e.id,e.name,e.generic_name,e.description]),t=[["ID","Name","Generic Name","Description"],...e].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n"),s=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download="products_".concat(new Date().toISOString().split("T")[0],".csv"),n.click(),window.URL.revokeObjectURL(a),r.oR.success("CSV exported successfully!")}catch(e){r.oR.error("Failed to export CSV")}},onExportPDF:()=>{try{let e=window.open("","_blank");if(!e)throw Error("Failed to open print window");let t='\n        <html>\n          <head>\n            <title>Products Report</title>\n            <style>\n              body { font-family: Arial, sans-serif; margin: 20px; }\n              table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 11px; }\n              th, td { border: 1px solid #ddd; padding: 6px; text-align: left; }\n              th { background-color: #f2f2f2; font-weight: bold; }\n              h1 { color: #333; }\n              .header { margin-bottom: 20px; }\n              .summary-card { border: 1px solid #ddd; padding: 10px; text-align: center; }\n            </style>\n          </head>\n          <body>\n            <div class="header">\n              <h1>Products Report</h1>\n              <p>Generated on: '.concat(new Date().toLocaleDateString(),"</p>\n              <p>Total Products: ").concat(N.length,'</p>\n            </div>\n            <div class="summary-card">\n              <h3>Total Products</h3>\n              <p>').concat(N.length,"</p>\n            </div>\n            <table>\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th>Generic Name</th>\n                  <th>Description</th>\n                </tr>\n              </thead>\n              <tbody>\n                ").concat(N.map(e=>"\n                  <tr>\n                    <td>".concat(e.name,"</td>\n                    <td>").concat(e.generic_name,"</td>\n                    <td>").concat(e.description||"N/A","</td>\n                  </tr>\n                ")).join(""),"\n              </tbody>\n            </table>\n          </body>\n        </html>\n      ");e.document.write(t),e.document.close(),e.print(),r.oR.success("PDF export initiated!")}catch(e){r.oR.error("Failed to export PDF")}}}),(0,a.jsx)(v,{products:N,loading:s,searchQuery:u.search,onAddProduct:b,onEditProduct:e=>{m(e),o(!0)},onDeleteProduct:w}),g.count>0&&(0,a.jsx)(A,{currentPage:u.page,totalCount:g.count,hasPrevious:!!g.previous,hasNext:!!g.next,onPageChange:e=>{p(t=>({...t,page:e}))}}),(0,a.jsx)(C.f,{isOpen:i,onClose:()=>{o(!1),m(null)},product:x,onSuccess:()=>{o(!1),m(null),y()}})]})}},37391:(e,t,s)=>{Promise.resolve().then(s.bind(s,14805))}},e=>{e.O(0,[6586,4277,8543,6373,2018,1778,6206,8441,5964,7358],()=>e(e.s=37391)),_N_E=e.O()}]);