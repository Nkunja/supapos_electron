"use strict";exports.id=1812,exports.ids=[1812],exports.modules={31812:(a,b,c)=>{c.d(b,{g:()=>M});var d=c(60687),e=c(64312);c(65048),c(53215),c(60256);var f=c(3018),g=c(24934),h=c(55192),i=c(68988),j=c(39390),k=c(63974),l=c(43210),m=c(70965),n=c(99270),o=c(96241);function p({className:a,...b}){return(0,d.jsx)(m.uB,{"data-slot":"command",className:(0,o.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",a),...b})}function q({className:a,...b}){return(0,d.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,d.jsx)(n.A,{className:"size-4 shrink-0 opacity-50"}),(0,d.jsx)(m.uB.Input,{"data-slot":"command-input",className:(0,o.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",a),...b})]})}function r({...a}){return(0,d.jsx)(m.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...a})}function s({className:a,...b}){return(0,d.jsx)(m.uB.Group,{"data-slot":"command-group",className:(0,o.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",a),...b})}function t({className:a,...b}){return(0,d.jsx)(m.uB.Item,{"data-slot":"command-item",className:(0,o.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...b})}c(37826);var u=c(91816);function v({...a}){return(0,d.jsx)(u.bL,{"data-slot":"popover",...a})}function w({...a}){return(0,d.jsx)(u.l9,{"data-slot":"popover-trigger",...a})}function x({className:a,align:b="center",sideOffset:c=4,...e}){return(0,d.jsx)(u.ZL,{children:(0,d.jsx)(u.UC,{"data-slot":"popover-content",align:b,sideOffset:c,className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",a),...e})})}var y=c(43649),z=c(5336),A=c(10022),B=c(19080),C=c(17971),D=c(13964),E=c(28561),F=c(40228),G=c(59402),H=c(41862),I=c(8819),J=c(11860),K=c(93853);let L={purchase_order:null,product:0,shop:0,batch_number:"",barcode:"",expiry_date:"",purchase_date:new Date().toISOString().split("T")[0],user_type:"both",drug_type:"otc",form:"tablet",pieces_per_unit:1,unit_of_measurement:"pieces",total_units:1,product_description:"",buying_price_per_unit:0,cost_price_per_piece:0,selling_price_per_piece:0,reorder_level:10,is_active:!0};function M({isOpen:a=!0,onClose:b,onSuccess:c,isEmbedded:m=!1,inventory:n=null}){let[o,u]=(0,l.useState)(L),[M,N]=(0,l.useState)(!1),[O,P]=(0,l.useState)(""),[Q,R]=(0,l.useState)(""),[S,T]=(0,l.useState)(null),[U,V]=(0,l.useState)(null),[W,X]=(0,l.useState)(null),[Y,Z]=(0,l.useState)([]),[$,_]=(0,l.useState)([]),[aa,ab]=(0,l.useState)([]),[ac,ad]=(0,l.useState)([]),[ae,af]=(0,l.useState)([]),[ag,ah]=(0,l.useState)(!1),[ai,aj]=(0,l.useState)(!1),[ak,al]=(0,l.useState)(!1),[am,an]=(0,l.useState)(!1),[ao,ap]=(0,l.useState)(!1),[aq,ar]=(0,l.useState)(""),[as,at]=(0,l.useState)(""),au=(a,b)=>{if("buying_price_per_unit"===a&&(b?.toString()||"").replace(".","").length>10)return void P("Buying price per unit must not exceed 10 digits");u(c=>({...c,[a]:b})),O&&P(""),Q&&R("")},av=Y.filter(a=>{if(!as)return!0;let b=as.toLowerCase().trim();return!b||a.name.toLowerCase().includes(b)||a.generic_name&&a.generic_name.toLowerCase().includes(b)||a.description&&a.description.toLowerCase().includes(b)||a.supplier&&a.supplier.toLowerCase().includes(b)}),aw=async a=>{if(a.preventDefault(),(()=>{if(!o.product||0===o.product)return P("Product selection is required"),!1;if(!o.shop||0===o.shop)return P("Shop selection is required"),!1;if(!o.batch_number.trim())return P("Batch number is required"),!1;if(o.pieces_per_unit<=0)return P("Pieces per unit must be greater than 0"),!1;if(o.total_units<=0)return P("Total units must be greater than 0"),!1;if(o.buying_price_per_unit<=0)return P("Buying price per unit must be greater than 0"),!1;if(o.cost_price_per_piece.toString().replace(".","").length>10)return P("Cost price per piece must not exceed 10 digits"),!1;if(o.selling_price_per_piece<=0)return P("Selling price per piece must be greater than 0"),!1;if(o.expiry_date){let a=new Date(o.expiry_date),b=new Date;if(b.setHours(0,0,0,0),a<=b)return P("Expiry date must be in the future"),!1}return!0})()){N(!0),P(""),R("");try{let a,d={purchase_order:o.purchase_order||void 0,product:o.product,shop:o.shop,batch_number:o.batch_number,barcode:o.barcode||void 0,user_type:o.user_type,drug_type:o.drug_type,form:o.form,pieces_per_unit:o.pieces_per_unit,unit_of_measurement:o.unit_of_measurement,total_units:o.total_units,product_description:o.product_description||void 0,expiry_date:o.expiry_date||void 0,purchase_date:o.purchase_date||void 0,cost_price_per_piece:o.cost_price_per_piece,selling_price_per_piece:o.selling_price_per_piece,reorder_level:o.reorder_level,is_active:o.is_active};n?(a=await (0,e.Q5)(n.id,d),K.oR.success("Inventory item updated successfully!")):(a=await (0,e.jQ)(d),K.oR.success("Inventory item created successfully!")),a&&(c(),m||b(),n||(u(L),T(null),V(null),ar(""),at("")))}catch(b){let a=b instanceof Error?b.message:"An error occurred";P(a),K.oR.error(a)}finally{N(!1)}}},ax=(0,d.jsxs)("div",{className:"space-y-6 p-6",children:[O&&(0,d.jsxs)(f.Fc,{className:"border-red-200 bg-red-50",children:[(0,d.jsx)(y.A,{className:"h-4 w-4 text-red-600"}),(0,d.jsx)(f.TN,{className:"text-red-800",children:O})]}),Q&&(0,d.jsxs)(f.Fc,{className:"border-green-200 bg-green-50",children:[(0,d.jsx)(z.A,{className:"h-4 w-4 text-green-600"}),(0,d.jsx)(f.TN,{className:"text-green-800",children:Q})]}),(0,d.jsxs)("form",{onSubmit:aw,className:"space-y-6",children:[(0,d.jsxs)(h.Zp,{className:"border-purple-200 shadow-sm",children:[(0,d.jsxs)(h.aR,{className:"bg-purple-50/50",children:[(0,d.jsxs)(h.ZB,{className:"text-lg font-semibold text-purple-800",children:[(0,d.jsx)(A.A,{className:"inline-block w-5 h-5 mr-2"}),"Purchase Order Selection"]}),(0,d.jsx)(h.BT,{className:"text-purple-600",children:"Select the purchase order this inventory item relates to (optional)"})]}),(0,d.jsx)(h.Wu,{className:"pt-6",children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"purchase_order",className:"text-sm font-medium text-gray-700",children:"Purchase Order"}),(0,d.jsxs)(k.l6,{value:o.purchase_order?.toString()||"none",onValueChange:a=>{if("none"===a)V(null),u(a=>({...a,purchase_order:null,shop:0}));else{let b=aa.find(b=>b.id?.toString()===a);b&&(V(b),u(a=>({...a,purchase_order:b.id,shop:"number"==typeof b.shop?b.shop:b.shop?.id||a.shop})))}},disabled:ak,children:[(0,d.jsx)(k.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,d.jsx)(k.yv,{placeholder:ak?"Loading purchase orders...":"Select purchase order (optional)"})}),(0,d.jsxs)(k.gC,{children:[(0,d.jsx)(k.eb,{value:"none",children:"No purchase order"}),aa.map(a=>(0,d.jsxs)(k.eb,{value:a.id.toString(),children:[a.name," - ",a.supplier_name||"No supplier"," (",a.status,")"]},a.id))]})]}),U&&(0,d.jsxs)("div",{className:"bg-purple-50 p-3 rounded-md border border-purple-200",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-purple-800",children:U.name}),(0,d.jsxs)("p",{className:"text-xs text-purple-600",children:["Supplier: ",U.supplier_name||"Not specified"]}),(0,d.jsxs)("p",{className:"text-xs text-purple-600",children:["Status: ",U.status]}),U.total_amount&&(0,d.jsxs)("p",{className:"text-xs text-purple-600",children:["Total Amount: $",U.total_amount]})]})]})})]}),(0,d.jsxs)(h.Zp,{className:"border-blue-200 shadow-sm",children:[(0,d.jsxs)(h.aR,{className:"bg-blue-50/50",children:[(0,d.jsxs)(h.ZB,{className:"text-lg font-semibold text-blue-800",children:[(0,d.jsx)(B.A,{className:"inline-block w-5 h-5 mr-2"}),"Product & Shop Selection"]}),(0,d.jsx)(h.BT,{className:"text-blue-600",children:"Select the product and shop for this inventory item"})]}),(0,d.jsx)(h.Wu,{className:"pt-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"product",className:"text-sm font-medium text-gray-700",children:"Product *"}),(0,d.jsxs)(v,{open:ao,onOpenChange:ap,children:[(0,d.jsx)(w,{asChild:!0,children:(0,d.jsxs)(g.$,{variant:"outline",role:"combobox","aria-expanded":ao,className:"w-full justify-between border-gray-300 focus:border-blue-500 focus:ring-blue-500",disabled:ag||!!n,children:[ag?"Loading products...":S?`${S.name}${S.generic_name?` (${S.generic_name})`:""}`:"Select product...",(0,d.jsx)(C.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,d.jsx)(x,{className:"w-[400px] p-0",align:"start",children:(0,d.jsxs)(p,{shouldFilter:!1,children:[(0,d.jsx)(q,{placeholder:"Search products...",value:as,onValueChange:at}),(0,d.jsx)(r,{children:as?"No products found matching your search.":"No products available."}),(0,d.jsx)(s,{className:"max-h-64 overflow-auto",children:av.map(a=>(0,d.jsxs)(t,{value:`${a.name}-${a.id}`,onSelect:()=>(a=>{let b=Y.find(b=>b.id.toString()===a);b&&(T(b),ar(b.name+(b.generic_name?` (${b.generic_name})`:"")),u(a=>({...a,product:b.id})),ap(!1))})(a.id.toString()),className:"cursor-pointer",children:[(0,d.jsx)(D.A,{className:`mr-2 h-4 w-4 ${S?.id===a.id?"opacity-100":"opacity-0"}`}),(0,d.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,d.jsx)("span",{className:"font-medium",children:a.name}),a.generic_name&&(0,d.jsxs)("span",{className:"text-sm text-gray-500",children:["Generic: ",a.generic_name]}),a.supplier&&(0,d.jsxs)("span",{className:"text-xs text-gray-400",children:["Supplier: ",a.supplier]})]})]},a.id))})]})})]}),S&&(0,d.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-200",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-blue-800",children:S.name}),S.generic_name&&(0,d.jsxs)("p",{className:"text-xs text-blue-600",children:["Generic: ",S.generic_name]}),S.description&&(0,d.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:S.description}),S.supplier&&(0,d.jsxs)("p",{className:"text-xs text-blue-600",children:["Supplier: ",S.supplier]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"shop",className:"text-sm font-medium text-gray-700",children:"Shop *"}),(0,d.jsxs)(k.l6,{value:o.shop.toString(),onValueChange:a=>au("shop",parseInt(a)),disabled:ai||!!n,children:[(0,d.jsx)(k.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,d.jsx)(k.yv,{placeholder:ai?"Loading shops...":"Select shop"})}),(0,d.jsx)(k.gC,{children:$.map(a=>(0,d.jsx)(k.eb,{value:a.id.toString(),children:a.name},a.id))})]})]})]})})]}),(0,d.jsxs)(h.Zp,{className:"border-gray-200 shadow-sm",children:[(0,d.jsxs)(h.aR,{className:"bg-gray-50/50",children:[(0,d.jsxs)(h.ZB,{className:"text-lg font-semibold text-gray-800",children:[(0,d.jsx)(E.A,{className:"inline-block w-5 h-5 mr-2"}),"Basic Information"]}),(0,d.jsx)(h.BT,{className:"text-gray-600",children:"Enter batch details and identification data"})]}),(0,d.jsx)(h.Wu,{className:"pt-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"batch_number",className:"text-sm font-medium text-gray-700",children:"Batch Number *"}),(0,d.jsx)(i.p,{id:"batch_number",value:o.batch_number,onChange:a=>au("batch_number",a.target.value),placeholder:"Enter batch number",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"barcode",className:"text-sm font-medium text-gray-700",children:"Barcode"}),(0,d.jsx)(i.p,{id:"barcode",value:o.barcode,onChange:a=>au("barcode",a.target.value),placeholder:"Enter barcode (optional)",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"purchase_date",className:"text-sm font-medium text-gray-700",children:"Purchase Date *"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(i.p,{id:"purchase_date",type:"date",value:o.purchase_date,onChange:a=>au("purchase_date",a.target.value),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 pr-10",required:!0}),(0,d.jsx)(F.A,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"expiry_date",className:"text-sm font-medium text-gray-700",children:"Expiry Date"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(i.p,{id:"expiry_date",type:"date",value:o.expiry_date,onChange:a=>au("expiry_date",a.target.value),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 pr-10",min:new Date().toISOString().split("T")[0]}),(0,d.jsx)(F.A,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400 pointer-events-none"})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Product expiration date for inventory tracking and safety"})]})]})})]}),(0,d.jsxs)(h.Zp,{className:"border-orange-200 shadow-sm",children:[(0,d.jsxs)(h.aR,{className:"bg-orange-50/50",children:[(0,d.jsx)(h.ZB,{className:"text-lg font-semibold text-orange-800",children:"Product Classification"}),(0,d.jsx)(h.BT,{className:"text-orange-600",children:"Specify the medical and regulatory classification"})]}),(0,d.jsx)(h.Wu,{className:"pt-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"user_type",className:"text-sm font-medium text-gray-700",children:"User Type"}),(0,d.jsxs)(k.l6,{value:o.user_type,onValueChange:a=>au("user_type",a),children:[(0,d.jsx)(k.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,d.jsx)(k.yv,{placeholder:"Select user type"})}),(0,d.jsxs)(k.gC,{children:[(0,d.jsx)(k.eb,{value:"adults",children:"Adults"}),(0,d.jsx)(k.eb,{value:"children",children:"Children"}),(0,d.jsx)(k.eb,{value:"both",children:"Adults & Children"})]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"drug_type",className:"text-sm font-medium text-gray-700",children:"Drug Type"}),(0,d.jsxs)(k.l6,{value:o.drug_type,onValueChange:a=>au("drug_type",a),disabled:am,children:[(0,d.jsx)(k.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,d.jsx)(k.yv,{placeholder:am?"Loading...":"Select drug type"})}),(0,d.jsx)(k.gC,{children:ac.map(a=>(0,d.jsx)(k.eb,{value:a.value,children:a.label},a.value))})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"form",className:"text-sm font-medium text-gray-700",children:"Form"}),(0,d.jsxs)(k.l6,{value:o.form,onValueChange:a=>au("form",a),children:[(0,d.jsx)(k.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,d.jsx)(k.yv,{placeholder:"Select form"})}),(0,d.jsxs)(k.gC,{children:[(0,d.jsx)(k.eb,{value:"tablet",children:"Tablet"}),(0,d.jsx)(k.eb,{value:"capsule",children:"Capsule"}),(0,d.jsx)(k.eb,{value:"syrup",children:"Syrup"}),(0,d.jsx)(k.eb,{value:"injection",children:"Injection"}),(0,d.jsx)(k.eb,{value:"cream",children:"Cream"}),(0,d.jsx)(k.eb,{value:"drops",children:"Drops"}),(0,d.jsx)(k.eb,{value:"inhaler",children:"Inhaler"}),(0,d.jsx)(k.eb,{value:"other",children:"Other"})]})]})]})]})})]}),(0,d.jsxs)(h.Zp,{className:"border-green-200 shadow-sm",children:[(0,d.jsxs)(h.aR,{className:"bg-green-50/50",children:[(0,d.jsx)(h.ZB,{className:"text-lg font-semibold text-green-800",children:"Product Pricing & Units"}),(0,d.jsx)(h.BT,{className:"text-green-600",children:"Set product-level pricing and unit information"})]}),(0,d.jsx)(h.Wu,{className:"pt-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"total_units",className:"text-sm font-medium text-gray-700",children:"Total Units * (specify the number of individual units stock)"}),(0,d.jsx)(i.p,{id:"total_units",type:"number",min:"1",value:o.total_units,onChange:a=>au("total_units",parseInt(a.target.value)||1),placeholder:"e.g., 10",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"ie. No. of Containers with maramoja is one unit, 10 containers = 10 units"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"pieces_per_unit",className:"text-sm font-medium text-gray-700",children:"Pieces per Unit * (based on the total pieces contained in a unit, box, bottle)"}),(0,d.jsx)(i.p,{id:"pieces_per_unit",type:"number",min:"1",value:o.pieces_per_unit,onChange:a=>au("pieces_per_unit",parseInt(a.target.value)||1),placeholder:"e.g., 20",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Number of individual pieces in each unit (e.g., 20 tablets per bottle)"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"unit_of_measurement",className:"text-sm font-medium text-gray-700",children:"Unit of Measurement"}),(0,d.jsxs)(k.l6,{value:o.unit_of_measurement,onValueChange:a=>au("unit_of_measurement",a),disabled:am,children:[(0,d.jsx)(k.bq,{className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:(0,d.jsx)(k.yv,{placeholder:am?"Loading...":"Select unit"})}),(0,d.jsx)(k.gC,{children:ae.map(a=>(0,d.jsx)(k.eb,{value:a.value,children:a.label},a.value))})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"product_description",className:"text-sm font-medium text-gray-700",children:"Product Description"}),(0,d.jsx)(i.p,{id:"product_description",value:o.product_description,onChange:a=>au("product_description",a.target.value),placeholder:"e.g., '50 tablets per unit', '100ml bottle'",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Optional description of the product packaging"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"buying_price_per_unit",className:"text-sm font-medium text-gray-700",children:"Buying Price per Unit * (Cost of each unit from supplier)"}),(0,d.jsx)(i.p,{id:"buying_price_per_unit",type:"number",min:"0",step:"0.01",value:o.buying_price_per_unit,onChange:a=>au("buying_price_per_unit",parseFloat(a.target.value)||0),placeholder:"e.g., 200.00",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:!0}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Cost price for each complete unit from supplier"}),o.buying_price_per_unit>0&&o.pieces_per_unit>0&&o.cost_price_per_piece>0&&(0,d.jsx)("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-200",children:(0,d.jsxs)("p",{className:"text-sm text-blue-800 font-medium",children:["\uD83D\uDCA1 Calculated Price per Piece: ",o.cost_price_per_piece||0]})})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"selling_price_per_piece",className:"text-sm font-medium text-gray-700",children:"Selling Price per Piece *"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(i.p,{id:"selling_price_per_piece",type:"number",min:"0",step:"0.01",value:o.selling_price_per_piece,onChange:a=>au("selling_price_per_piece",parseFloat(a.target.value)||0),placeholder:"e.g., 30.00",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500 pr-10",required:!0}),W&&(0,d.jsx)(g.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-8 w-8 p-0",onClick:()=>au("selling_price_per_piece",W),title:"Use calculated price",children:(0,d.jsx)(G.A,{className:"h-4 w-4"})})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Retail price for individual pieces sold to customers"}),W&&(0,d.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-200",children:[(0,d.jsxs)("p",{className:"text-sm text-blue-800 font-medium",children:["\uD83D\uDCA1 Calculated Selling Price: ",W.toFixed(2)]}),(0,d.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"Based on 30% markup, rounded to nearest 10"})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(j.J,{htmlFor:"reorder_level",className:"text-sm font-medium text-gray-700",children:"Reorder Level"}),(0,d.jsx)(i.p,{id:"reorder_level",type:"number",min:"0",value:o.reorder_level,onChange:a=>au("reorder_level",parseInt(a.target.value)||10),placeholder:"e.g., 50",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Minimum stock level before reordering"})]})]})})]}),o.buying_price_per_unit>0&&o.pieces_per_unit>0&&o.total_units>0&&(0,d.jsxs)(h.Zp,{className:"border-indigo-200 shadow-sm bg-gradient-to-r from-indigo-50 to-purple-50",children:[(0,d.jsx)(h.aR,{children:(0,d.jsx)(h.ZB,{className:"text-lg font-semibold text-indigo-800",children:"\uD83D\uDCCA Purchase Summary"})}),(0,d.jsx)(h.Wu,{children:(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,d.jsxs)("div",{className:"bg-white p-3 rounded-lg border",children:[(0,d.jsx)("p",{className:"text-gray-600",children:"Total Pieces"}),(0,d.jsx)("p",{className:"text-xl font-bold text-purple-600",children:(o.pieces_per_unit*o.total_units).toLocaleString()})]}),(0,d.jsxs)("div",{className:"bg-white p-3 rounded-lg border",children:[(0,d.jsx)("p",{className:"text-gray-600",children:"Total Cost"}),(0,d.jsx)("p",{className:"text-xl font-bold text-red-600",children:(o.buying_price_per_unit*o.total_units).toLocaleString()})]}),(0,d.jsxs)("div",{className:"bg-white p-3 rounded-lg border",children:[(0,d.jsx)("p",{className:"text-gray-600",children:"Potential Revenue"}),(0,d.jsx)("p",{className:"text-xl font-bold text-green-600",children:(o.selling_price_per_piece*o.pieces_per_unit*o.total_units).toLocaleString()})]}),(0,d.jsxs)("div",{className:"bg-white p-3 rounded-lg border",children:[(0,d.jsx)("p",{className:"text-gray-600",children:"Potential Profit"}),(0,d.jsx)("p",{className:"text-xl font-bold text-blue-600",children:((o.selling_price_per_piece-o.cost_price_per_piece)*o.pieces_per_unit*o.total_units).toLocaleString()})]})]})})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[!m&&(0,d.jsx)(g.$,{type:"button",variant:"outline",onClick:b,disabled:M,className:"min-w-[100px]",children:"Cancel"}),(0,d.jsx)(g.$,{type:"submit",disabled:M,className:"min-w-[120px] bg-blue-600 hover:bg-blue-700",children:M?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(H.A,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Updating...":"Creating..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(I.A,{className:"mr-2 h-4 w-4"}),n?"Update Inventory":"Add to Inventory"]})})]})]})]});return m||a?m?ax:(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex justify-end pointer-events-none",children:(0,d.jsxs)("div",{className:"bg-white w-full max-w-4xl h-full overflow-y-auto shadow-2xl pointer-events-auto",children:[(0,d.jsx)("div",{className:"sticky top-0 bg-white border-b p-6 z-10",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:n?"Edit Inventory Item":"Add Product from Purchase Order"}),(0,d.jsx)("p",{className:"text-gray-600 mt-1",children:n?"Update inventory item details and purchase information":"Create a new inventory item by selecting a purchase order and product details"})]}),(0,d.jsx)(g.$,{variant:"ghost",size:"icon",onClick:b,className:"h-8 w-8",children:(0,d.jsx)(J.A,{className:"h-4 w-4"})})]})}),(0,d.jsx)("div",{className:"p-6",children:ax})]})}):null}},37826:(a,b,c)=>{c.d(b,{Cf:()=>k,Es:()=>m,L3:()=>n,c7:()=>l,lG:()=>h,rr:()=>o});var d=c(60687);c(43210);var e=c(80195),f=c(11860),g=c(96241);function h({...a}){return(0,d.jsx)(e.bL,{"data-slot":"dialog",...a})}function i({...a}){return(0,d.jsx)(e.ZL,{"data-slot":"dialog-portal",...a})}function j({className:a,...b}){return(0,d.jsx)(e.hJ,{"data-slot":"dialog-overlay",className:(0,g.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function k({className:a,children:b,showCloseButton:c=!0,...h}){return(0,d.jsxs)(i,{"data-slot":"dialog-portal",children:[(0,d.jsx)(j,{}),(0,d.jsxs)(e.UC,{"data-slot":"dialog-content",className:(0,g.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...h,children:[b,c&&(0,d.jsxs)(e.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,d.jsx)(f.A,{}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function l({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-header",className:(0,g.cn)("flex flex-col gap-2 text-center sm:text-left",a),...b})}function m({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-footer",className:(0,g.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function n({className:a,...b}){return(0,d.jsx)(e.hE,{"data-slot":"dialog-title",className:(0,g.cn)("text-lg leading-none font-semibold",a),...b})}function o({className:a,...b}){return(0,d.jsx)(e.VY,{"data-slot":"dialog-description",className:(0,g.cn)("text-muted-foreground text-sm",a),...b})}},65048:(a,b,c)=>{c.d(b,{DD:()=>i,WY:()=>g,d$:()=>f,vc:()=>h}),c(36784);var d=c(96718);let e="https://supa.sirnkunja.co.ke/api/products/",f=async a=>{try{let b=new URLSearchParams;a?.page&&b.append("page",a.page),a?.search&&b.append("search",a.search),a?.category&&b.append("category",a.category),a?.is_active&&b.append("is_active",a.is_active);let c=b.toString()?`${e}?${b.toString()}`:e;return(await d.default.get(c)).data}catch(a){throw Error("Failed to fetch products.")}},g=async a=>{try{return(await d.default.post(e,a)).data}catch(a){throw Error("Failed to create product.")}},h=async(a,b)=>{try{return(await d.default.put(`${e}${a}/`,b)).data}catch(a){throw Error("Failed to update product.")}},i=async a=>{try{return(await d.default.delete(`${e}${a}/`)).data}catch(a){throw Error("Failed to delete product.")}}}};